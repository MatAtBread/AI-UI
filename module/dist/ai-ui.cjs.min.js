"use strict";var ce=Object.defineProperty;var Ne=Object.getOwnPropertyDescriptor;var je=Object.getOwnPropertyNames;var Re=Object.prototype.hasOwnProperty;var Te=(e,t)=>{for(var n in t)ce(e,n,{get:t[n],enumerable:!0})},Be=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of je(t))!Re.call(e,l)&&l!==n&&ce(e,l,{get:()=>t[l],enumerable:!(r=Ne(t,l))||r.enumerable});return e};var Ue=e=>Be(ce({},"__esModule",{value:!0}),e);var et={};Te(et,{Iterators:()=>se,augmentGlobalAsyncGenerators:()=>De,enableOnRemovedFromDOM:()=>ke,getElementIdMap:()=>Me,tag:()=>Ce,when:()=>ae});module.exports=Ue(et);var ve,M=globalThis.DEBUG=="*"||globalThis.DEBUG==!0||((ve=globalThis.DEBUG)==null?void 0:ve.match(/(^|\W)AI-UI(\W|$)/))||!1;var J=5e3,P={log(...e){M&&console.log("(AI-UI) LOG:",...e)},warn(...e){M&&console.warn("(AI-UI) WARN:",...e)},info(...e){M&&console.debug("(AI-UI) INFO:",...e)}};var Ee=e=>{};function de(){let e=Ee,t=Ee,n=new Promise((...r)=>[e,t]=r);if(n.resolve=e,n.reject=t,M){let r=new Error().stack;n.catch(l=>l instanceof Error||(l==null?void 0:l.value)instanceof Error?P.log("Deferred rejection",l,"allocated at ",r):void 0)}return n}function W(e){return e!=null&&typeof e.then=="function"}var se={};Te(se,{Ignore:()=>R,Iterability:()=>Q,asyncIterator:()=>ue,combine:()=>xe,defineIterableProperty:()=>ye,filterMap:()=>V,generatorHelpers:()=>Ke,isAsyncIter:()=>L,isAsyncIterable:()=>z,isAsyncIterator:()=>q,iterableHelpers:()=>K,merge:()=>ee,queueIteratableIterator:()=>oe});function q(e){return typeof(e==null?void 0:e.next)=="function"}function z(e){return e&&e[Symbol.asyncIterator]&&typeof e[Symbol.asyncIterator]=="function"}function L(e){return z(e)||q(e)}function ue(e){if(z(e))return e[Symbol.asyncIterator]();if(q(e))return e;throw new Error("Not as async provider")}var Z={filterMap:V,map:Le,filter:We,unique:Ge,waitFor:Ve,multi:Fe,initially:$e,consume:Pe,merge(...e){return ee(this,...e)},combine(e){return xe(Object.assign({_this:this},e))}};function oe(e=()=>{}){let t=[],n=[],r={[Symbol.asyncIterator](){return r},next(){if(n!=null&&n.length)return Promise.resolve({done:!1,value:n.shift()});let l=de();return l.catch(i=>{}),t.push(l),l},return(){let l={done:!0,value:void 0};if(t){try{e()}catch(i){}for(;t.length;)t.shift().resolve(l);n=t=null}return Promise.resolve(l)},throw(...l){let i={done:!0,value:l[0]};if(t){try{e()}catch(f){}for(;t.length;)t.shift().reject(i);n=t=null}return Promise.reject(i)},push(l){return t?(t.length?t.shift().resolve({done:!1,value:l}):n?n.push(l):P.log("Discarding queue push as there are no consumers"),!0):!1}};return K(r)}var Q=Symbol("Iterability");function ye(e,t,n){let r=()=>{r=()=>g;let s=oe(),y=s.multi(),g=y[Symbol.asyncIterator]();return i[Symbol.asyncIterator]={value:y[Symbol.asyncIterator],enumerable:!1,writable:!1},f=s.push,Object.keys(Z).forEach(G=>i[G]={value:g[G],enumerable:!1,writable:!1}),Object.defineProperties(u,i),g};function l(s){return function(...y){return r(),u[s].call(this,...y)}}let i={[Symbol.asyncIterator]:{enumerable:!1,writable:!0,value:r}};Object.keys(Z).forEach(s=>i[s]={enumerable:!1,writable:!0,value:l(s)});let f=s=>(r(),f(s));typeof n=="object"&&n&&Q in n&&(i[Q]=Object.getOwnPropertyDescriptor(n,Q));let u=p(n,i),a=!1;return Object.defineProperty(e,t,{get(){return u},set(s){if(s!==u){if(a)throw new Error(`Iterable "${t.toString()}" is already consuming another iterator`);z(s)?(a=!0,M&&P.info("(AI-UI)",new Error(`Iterable "${t.toString()}" has been assigned to consume another iterator. Did you mean to declare it?`)),Pe.call(s,y=>{f(y==null?void 0:y.valueOf())}).finally(()=>a=!1)):u=p(s,i)}f(s==null?void 0:s.valueOf())},enumerable:!0}),e;function p(s,y){var G;let g=R;if(s==null)return Object.create(null,{...y,valueOf:{value(){return s},writable:!0},toJSON:{value(){return s},writable:!0}});switch(typeof s){case"object":return Symbol.asyncIterator in s?s:(g===R?(M&&P.info("(AI-UI)",`The iterable property '${t.toString()}' of type "object" will be spread to prevent re-initialisation.
${(G=new Error().stack)==null?void 0:G.slice(6)}`),Array.isArray(s)?g=Object.defineProperties([...s],y):g=Object.defineProperties({...s},y)):Object.assign(g,s),g[Q]==="shallow"?g:new Proxy(g,{set($,U,F,d){return Reflect.set($,U,F,d)?(f(e[t]),!0):!1},get($,U,F){if(U==="valueOf")return()=>g;let d=Reflect.getOwnPropertyDescriptor($,U);if(d===void 0||d.enumerable){d===void 0&&($[U]=void 0);let b=Reflect.get(g,U,F),A=Object.getOwnPropertyDescriptors(g.map((o,v)=>{var C;let c=(C=o==null?void 0:o[U])==null?void 0:C.valueOf(),E=v==null?void 0:v.valueOf();return typeof c==typeof E&&c==E?R:c}));return Reflect.ownKeys(A).forEach(o=>A[o].enumerable=!1),p(b,A)}return Reflect.get($,U,F)}}));case"bigint":case"boolean":case"number":case"string":return Object.defineProperties(Object(s),{...y,toJSON:{value(){return s.valueOf()},writable:!0}})}throw new TypeError('Iterable properties cannot be of type "'+typeof s+'"')}}var ee=(...e)=>{let t=new Array(e.length),n=new Array(e.length),r=()=>{r=()=>{};for(let a=0;a<e.length;a++){let p=e[a];n[a]=(t[a]=Symbol.asyncIterator in p?p[Symbol.asyncIterator]():p).next().then(s=>({idx:a,result:s}))}},l=[],i=new Promise(()=>{}),f=n.length,u={[Symbol.asyncIterator](){return u},next(){return r(),f?Promise.race(n).then(({idx:a,result:p})=>p.done?(f--,n[a]=i,l[a]=p.value,u.next()):(n[a]=t[a]?t[a].next().then(s=>({idx:a,result:s})).catch(s=>({idx:a,result:{done:!0,value:s}})):Promise.resolve({idx:a,result:{done:!0,value:void 0}}),p)).catch(a=>{var p,s;return(s=(p=u.throw)==null?void 0:p.call(u,a))!=null?s:Promise.reject({done:!0,value:new Error("Iterator merge exception")})}):Promise.resolve({done:!0,value:l})},async return(a){var p,s;for(let y=0;y<t.length;y++)n[y]!==i&&(n[y]=i,l[y]=await((s=(p=t[y])==null?void 0:p.return)==null?void 0:s.call(p,{done:!0,value:a}).then(g=>g.value,g=>g)));return{done:!0,value:l}},async throw(a){var p,s;for(let y=0;y<t.length;y++)n[y]!==i&&(n[y]=i,l[y]=await((s=(p=t[y])==null?void 0:p.throw)==null?void 0:s.call(p,a).then(g=>g.value,g=>g)));return{done:!0,value:l}}};return K(u)},xe=(e,t={})=>{let n={},r,l=[],i=0,f=new Promise(()=>{}),u={[Symbol.asyncIterator](){return u},next(){return r===void 0&&(r=Object.entries(e).map(([a,p],s)=>(i+=1,l[s]=p[Symbol.asyncIterator](),l[s].next().then(y=>({si:l,idx:s,k:a,ir:y}))))),function a(){return Promise.race(r).then(({idx:p,k:s,ir:y})=>y.done?(r[p]=f,i-=1,i?a():{done:!0,value:void 0}):(n[s]=y.value,r[p]=l[p].next().then(g=>({idx:p,k:s,ir:g})),t.ignorePartial&&Object.keys(n).length<Object.keys(e).length?a():{done:!1,value:n}))}()},return(a){return r.forEach((p,s)=>{var y,g;p!==f&&((g=(y=l[s]).return)==null||g.call(y,a))}),Promise.resolve({done:!0,value:a})},throw(a){return r.forEach((p,s)=>{var y,g;p!==f&&((g=(y=l[s]).throw)==null||g.call(y,a))}),Promise.reject({done:!0,value:a})}};return K(u)};function He(e){return z(e)&&Object.keys(Z).every(t=>t in e&&e[t]===Z[t])}function K(e){return He(e)||Object.defineProperties(e,Object.fromEntries(Object.entries(Object.getOwnPropertyDescriptors(Z)).map(([t,n])=>[t,{...n,enumerable:!1}]))),e}function Ke(e){return function(...t){let n=e(...t);return K(n)}}async function Pe(e){let t;for await(let n of this)t=e==null?void 0:e(n);await t}var R=Symbol("Ignore");function V(e,t,n=R){let r,l=R,i={[Symbol.asyncIterator](){return i},next(...f){if(n!==R){let u=Promise.resolve({done:!1,value:n});return n=R,u}return new Promise(function u(a,p){r||(r=e[Symbol.asyncIterator]()),r.next(...f).then(s=>s.done?a(s):Promise.resolve(t(s.value,l)).then(y=>y===R?u(a,p):a({done:!1,value:l=y}),y=>{var g;r.throw?r.throw(y):(g=r.return)==null||g.call(r,y),p({done:!0,value:y})}),s=>p({done:!0,value:s})).catch(s=>{var y;r.throw?r.throw(s):(y=r.return)==null||y.call(r,s),p({done:!0,value:s})})})},throw(f){var u;return Promise.resolve(r!=null&&r.throw?r.throw(f):(u=r==null?void 0:r.return)==null?void 0:u.call(r,f)).then(a=>({done:!0,value:a==null?void 0:a.value}))},return(f){var u;return Promise.resolve((u=r==null?void 0:r.return)==null?void 0:u.call(r,f)).then(a=>({done:!0,value:a==null?void 0:a.value}))}};return K(i)}function Le(e){return V(this,e)}function We(e){return V(this,async t=>await e(t)?t:R)}function Ge(e){return e?V(this,async(t,n)=>n===R||await e(t,n)?t:R):V(this,(t,n)=>t===n?R:t)}function $e(e){return V(this,t=>t,e)}function Ve(e){return V(this,t=>new Promise(n=>(e(()=>n(t)),t)))}function Fe(){let e=this,t=0,n,r;function l(f){f&&n.resolve(f),f!=null&&f.done||(n=de(),r.next().then(l).catch(u=>n.reject({done:!0,value:u})))}let i={[Symbol.asyncIterator](){return t+=1,i},next(){return r||(r=e[Symbol.asyncIterator](),l()),n},throw(f){var u;if(t<1)throw new Error("AsyncIterator protocol error");return t-=1,t?Promise.resolve({done:!0,value:f}):Promise.resolve(r!=null&&r.throw?r.throw(f):(u=r==null?void 0:r.return)==null?void 0:u.call(r,f)).then(a=>({done:!0,value:a==null?void 0:a.value}))},return(f){var u;if(t<1)throw new Error("AsyncIterator protocol error");return t-=1,t?Promise.resolve({done:!0,value:f}):Promise.resolve((u=r==null?void 0:r.return)==null?void 0:u.call(r,f)).then(a=>({done:!0,value:a==null?void 0:a.value}))}};return K(i)}var te=new Map;function Xe(e){let t=te.get(e.type);if(t)for(let n of t)try{let{push:r,terminate:l,container:i,selector:f}=n;if(document.body.contains(i)){if(e.target instanceof Node)if(f){let u=i.querySelectorAll(f);for(let a of u)(e.target===a||a.contains(e.target))&&i.contains(a)&&r(e)}else(e.target===i||i.contains(e.target))&&r(e)}else{let u="Container `#"+i.id+">"+(f||"")+"` removed from DOM. Removing subscription";t.delete(n),l(new Error(u))}}catch(r){P.warn("(AI-UI)","docEventHandler",r)}}function fe(e){return!!(e&&(e.startsWith("#")||e.startsWith(".")||e.startsWith("[")&&e.endsWith("]")))}function me(e){let t=e.split(":");if(t.length===1)return fe(t[0])?[t[0],"change"]:[null,t[0]];if(t.length===2&&fe(t[1])&&!fe(t[0]))return[t[1],t[0]]}function qe(e){throw new Error(e)}function pe(e,t){var f;let[n,r]=(f=me(t))!=null?f:qe("Invalid WhenSelector: "+t);te.has(r)||(document.addEventListener(r,Xe,{passive:!0,capture:!0}),te.set(r,new Set));let l=oe(()=>{var u;return(u=te.get(r))==null?void 0:u.delete(i)}),i={push:l.push,terminate(u){var a;(a=l.return)==null||a.call(l,u)},container:e,selector:n||null};return we(e,n?[n]:void 0).then(u=>te.get(r).add(i)),l.multi()}async function*Ae(){await new Promise(()=>{}),yield void 0}function be(e){function t(n){return e.map(n)}return Object.assign(K(t),{[Symbol.asyncIterator]:()=>e[Symbol.asyncIterator]()})}function _e(e){if(!e)throw new Error(`Falsy async source will never be ready

`+JSON.stringify(e));return typeof e=="string"&&e[0]!=="@"&&!!me(e)}async function*Ye(e){yield e}function ae(e,...t){if(!t||t.length===0)return be(pe(e,"change"));let n=t.filter(i=>typeof i!="string"||i[0]!=="@").map(i=>typeof i=="string"?pe(e,i):i instanceof Element?pe(i,"change"):W(i)?Ye(i):i);if(t.includes("@start")){let i={[Symbol.asyncIterator]:()=>i,next(){return i.next=()=>Promise.resolve({done:!0,value:void 0}),Promise.resolve({done:!1,value:{}})}};n.push(i)}if(t.includes("@ready")){let f=function(p){return typeof p=="string"&&!e.querySelector(p)};var l=f;let u=t.filter(_e).map(p=>{var s;return(s=me(p))==null?void 0:s[0]}).filter(f),a={[Symbol.asyncIterator](){return a},async next(){var y,g;await we(e,u);let s=(n.length>1?ee(...n):n.length===1?n[0]:Ae())[Symbol.asyncIterator]();return s?(a.next=s.next.bind(s),a.return=(y=s.return)==null?void 0:y.bind(s),a.throw=(g=s.throw)==null?void 0:g.bind(s),{done:!1,value:{}}):{done:!0,value:void 0}}};return be(K(a))}let r=n.length>1?ee(...n):n.length===1?n[0]:Ae();return be(K(r))}function Oe(e){return document.body.contains(e)?Promise.resolve():new Promise(t=>new MutationObserver((n,r)=>{n.some(l=>{var i;return(i=l.addedNodes)==null?void 0:i.length})&&document.body.contains(e)&&(r.disconnect(),t())}).observe(document.body,{subtree:!0,childList:!0}))}function we(e,t){return t!=null&&t.length?Promise.all([Je(e,t),Oe(e)]):Oe(e)}function Je(e,t){var r;if(t=t.filter(l=>!e.querySelector(l)),!t.length)return Promise.resolve();let n=new Promise(l=>new MutationObserver((i,f)=>{i.some(u=>{var a;return(a=u.addedNodes)==null?void 0:a.length})&&t.every(u=>e.querySelector(u))&&(f.disconnect(),l())}).observe(e,{subtree:!0,childList:!0}));if(M){let l=(r=new Error().stack)==null?void 0:r.replace(/^Error/,"Missing selectors after 5 seconds:"),i=setTimeout(()=>{P.warn("(AI-UI)",l,t)},J);n.finally(()=>clearTimeout(i))}return n}var re=Symbol("Unique ID");var Qe=0,Ze=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],ze={get ids(){return Me(this)},set ids(e){throw new Error("Cannot set ids on "+this.valueOf())},when:function(...e){return ae(this,...e)}},le=document.createElement("STYLE");le.id="--ai-ui-extended-tag-styles-";function ie(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="function"||e instanceof Node||e instanceof NodeList||e instanceof HTMLCollection||e===null||e===void 0||Array.isArray(e)||W(e)||L(e)||typeof e[Symbol.iterator]=="function"}var ne=Symbol("callStack"),Ce=function(e,t,n){let[r,l,i]=typeof e=="string"||e===null?[e,t,n]:Array.isArray(e)?[null,e,t]:[null,Ze,e],f=Object.create(null,Object.getOwnPropertyDescriptors(ze));Object.defineProperty(f,"attributes",{...Object.getOwnPropertyDescriptor(Element.prototype,"attributes"),set(d){if(L(d)){let b=q(d)?d:d[Symbol.asyncIterator](),A=()=>b.next().then(({done:o,value:v})=>{g(this,v),o||A()},o=>P.warn("(AI-UI)",o));A()}else g(this,d)}}),i&&s(f,i);function u(...d){let b=[];return function A(o){var v;if(!(o==null||o===R)){if(W(o)){let c=[ge()];b.push(c[0]),o.then(E=>{let C=u(E),m=c;m[0].parentNode&&(a(m[0].parentNode,m[0])(C),m.forEach(h=>{var I;return(I=h.parentNode)==null?void 0:I.removeChild(h)})),c=C},E=>{var m;P.warn("(AI-UI)",E,c);let C=c[0];C&&((m=C.parentNode)==null||m.replaceChild(he({error:E}),C))});return}if(o instanceof Node){b.push(o);return}if(L(o)){let c=M?`
`+((v=new Error().stack)==null?void 0:v.replace(/^Error: /,"Insertion :")):"",E=q(o)?o:o[Symbol.asyncIterator](),C=o.valueOf(),m=C===void 0||C===o?[ge()]:u(C);b.push(...m);let h=m,I=!0,T=Date.now()+J,k=B=>{let w=h.filter(x=>!!(x!=null&&x.parentNode));w.length?(h=a(w[0].parentNode,w[0])(he({error:B})),w.forEach(x=>!h.includes(x)&&x.parentNode.removeChild(x))):P.warn("(AI-UI)","Can't report error",B,h)},D=B=>{var w;if(!B.done)try{let x=h.filter(S=>{var _;return(S==null?void 0:S.parentNode)&&((_=S.ownerDocument)==null?void 0:_.body.contains(S))}),O=I?h:x;if(x.length&&(I=!1),!O.length){let S="Element(s) do not exist in document"+c;throw new Error("Element(s) do not exist in document"+c)}I&&T&&T<Date.now()&&(T=Number.MAX_SAFE_INTEGER,P.log("Async element not mounted after 5 seconds. If it is never mounted, it will leak.",h));let X=u(y(B.value));h=a(O[0].parentNode,O[0])(X.length?X:ge()),O.forEach(S=>!h.includes(S)&&S.parentNode.removeChild(S)),E.next().then(D).catch(k)}catch(x){(w=E.return)==null||w.call(E,x)}};E.next().then(D).catch(k);return}if(typeof o=="object"&&(o!=null&&o[Symbol.iterator])){for(let c of o)A(c);return}b.push(document.createTextNode(o.toString()))}}(d),b}function a(d,b){return b===void 0&&(b=null),function(A){let o=u(A);if(b)if(b instanceof Element)Element.prototype.before.call(b,...o);else{let v=b.parentNode;if(!v)throw new Error("Parent is null");v!==d&&P.warn("(AI-UI)","Internal error - container mismatch");for(let c=0;c<o.length;c++)v.insertBefore(o[c],b)}else Element.prototype.append.call(d,...o);return o}}r||Object.assign(Ce,{appender:a,nodes:u,UniqueID:re,augmentGlobalAsyncGenerators:De});let p=Object.getPrototypeOf({});function s(d,b,A){if(!(b==null||typeof b!="object"||b===d))for(let[o,v]of Object.entries(Object.getOwnPropertyDescriptors(b)))try{if("value"in v){let c=v.value;c&&L(c)?Object.defineProperty(d,o,v):c&&typeof c=="object"&&!W(c)?o in d?c instanceof Node?(P.info("Having DOM Nodes as properties of other DOM Nodes is a bad idea as it makes the DOM tree into a cyclic graph. You should reference nodes by ID or as a child",o,c),d[o]=c):d[o]!==c&&(Array.isArray(d[o])&&d[o].length!==c.length?c.constructor===Object||c.constructor===Array?s(d[o]=new c.constructor,c):d[o]=c:s(d[o],c)):(A&&(Object.getPrototypeOf(c)===p||!Object.getPrototypeOf(c)?s(v.value={},c):Array.isArray(c)?s(v.value=[],c):P.warn(`Declared propety '${o}' is not a plain object and must be assigned by reference, possibly polluting other instances of this tag`,d,c)),Object.defineProperty(d,o,v)):b[o]!==void 0&&(d[o]=b[o])}else Object.defineProperty(d,o,v)}catch(c){throw P.warn("(AI-UI)","deepAssign",o,b[o],c),c}}function y(d){let b=d==null?void 0:d.valueOf();return Array.isArray(b)?b.map(y):b}function g(d,b){ne in b||function A(o,v){if(v==null||typeof v!="object")return;let c=Object.entries(Object.getOwnPropertyDescriptors(v));c.sort((m,h)=>{let I=Object.getOwnPropertyDescriptor(o,m[0]);if(I){if("value"in I)return-1;if("set"in I)return 1;if("get"in I)return .5}return 0});for(let[m,h]of c)try{if("value"in h){let I=h.value;L(I)?E(I,m):W(I)?I.then(T=>{T&&typeof T=="object"?L(T)?E(T,m):C(T,m):v[m]!==void 0&&(o[m]=v[m])},T=>P.log("Failed to set attribute",T)):L(I)||(I&&typeof I=="object"&&!W(I)?C(I,m):v[m]!==void 0&&(o[m]=v[m]))}else Object.defineProperty(o,m,h)}catch(I){throw P.warn("(AI-UI)","assignProps",m,v[m],I),I}function E(m,h){let I=ue(m),T=!0,k=Date.now()+J,D=w=>{var x;if(!w.done){let O=y(w.value);if(typeof O=="object"&&O!==null){let S=Object.getOwnPropertyDescriptor(o,h);h==="style"||!(S!=null&&S.set)?A(o[h],O):o[h]=O}else O!==void 0&&(o[h]=O);let X=d.ownerDocument.contains(d);if(!T&&!X){let S=`Element does not exist in document when setting async attribute '${h}'`;(x=I.return)==null||x.call(I,new Error(S));return}X&&(T=!1),T&&k&&k<Date.now()&&(k=Number.MAX_SAFE_INTEGER,P.log(`Element with async attribute '${h}' not mounted after 5 seconds. If it is never mounted, it will leak.`,d)),I.next().then(D).catch(B)}},B=w=>{var x;(x=I.return)==null||x.call(I,w),P.warn("(AI-UI)","Dynamic attribute error",w,h,o,d),a(d)(he({error:w}))};I.next().then(D).catch(B)}function C(m,h){var I;if(m instanceof Node)P.info("Having DOM Nodes as properties of other DOM Nodes is a bad idea as it makes the DOM tree into a cyclic graph. You should reference nodes by ID or via a collection such as .childNodes",h,m),o[h]=m;else if(!(h in o)||o[h]===m||Array.isArray(o[h])&&o[h].length!==m.length)if(m.constructor===Object||m.constructor===Array){let T=new m.constructor;A(T,m),o[h]=T}else o[h]=m;else(I=Object.getOwnPropertyDescriptor(o,h))!=null&&I.set?o[h]=m:A(o[h],m)}}(d,b)}function G(d){for(let b=d.constructor;b;b=b.super)if(b===this)return!0;return!1}function $(d){var h,I;let b=typeof d!="function"?T=>Object.assign({},d,T):d,A=Date.now().toString(36)+(Qe++).toString(36)+Math.random().toString(36).slice(2),o=b({[re]:A});o.styles&&(le.appendChild(document.createTextNode(o.styles+`
`)),document.head.contains(le)||document.head.appendChild(le));let c=Object.assign((T,...k)=>{var S,_;let D=ie(T),B=[],w={[ne]:(S=D?B:T[ne])!=null?S:B},x=D?this(w,T,...k):this(w,...k);x.constructor=c;let O=b({[re]:A});if(w[ne].push(O),M){let j=function(N,H){var Ie;for(let Y=N;Y;Y=Y.super)if((Ie=Y.definition)!=null&&Ie.declare&&H in Y.definition.declare)return!0;return!1};var X=j;if(O.declare){let N=Object.keys(O.declare).filter(H=>H in x||j(this,H));N.length&&P.log(`Declared keys '${N}' in ${c.name} already exist in base '${this.valueOf()}'`)}if(O.override){let N=Object.keys(O.override).filter(H=>!(H in x)&&!(i&&H in i)&&!j(this,H));N.length&&P.log(`Overridden keys '${N}' in ${c.name} do not exist in base '${this.valueOf()}'`)}}if(s(x,O.declare,!0),s(x,O.override),O.iterable&&Object.keys(O.iterable).forEach(j=>{j in x?P.log(`Ignoring attempt to re-define iterable property "${j}" as it could already have consumers`):ye(x,j,O.iterable[j])}),w[ne]===B){D||g(x,T);for(let j of B){let N=(_=j==null?void 0:j.constructed)==null?void 0:_.call(x);ie(N)&&a(x)(N)}for(let j of B)if(j.iterable){for(let N of Object.keys(j.iterable))if(!(!D&&N in T&&(!W(T[N])||!L(T[N])))){let H=x[N];(H==null?void 0:H.valueOf())!==void 0&&(x[N]=H)}}}return x},{super:this,definition:Object.assign(o,{[re]:A}),extended:$,valueOf:()=>{let T=[...Object.keys(o.declare||{}),...Object.keys(o.iterable||{})];return`${c.name}: {${T.join(", ")}}
 \u21AA ${this.valueOf()}`}});Object.defineProperty(c,Symbol.hasInstance,{value:G,writable:!0,configurable:!0});let E={};(function T(k){k!=null&&k.super&&T(k.super);let D=k.definition;D&&(s(E,D==null?void 0:D.override),s(E,D==null?void 0:D.declare))})(this),s(E,o.override),s(E,o.declare),Object.defineProperties(c,Object.getOwnPropertyDescriptors(E));let C=E&&"className"in E&&typeof E.className=="string"?E.className:A,m=M&&(I=(h=new Error().stack)==null?void 0:h.split(`
`)[2])!=null?I:"";if(Object.defineProperty(c,"name",{value:"<ai-"+C.replace(/\s+/g,"-")+m+">"}),M){let T=Object.keys(o).filter(k=>!["styles","ids","constructed","declare","override","iterable"].includes(k));T.length&&P.log(`${c.name} defines extraneous keys '${T}', which are unknown`)}return c}let U={};function F(d){if(U[d])return U[d];let b=(o,...v)=>{let c=document;if(ie(o)&&(v.unshift(o),o={}),!ie(o)){if(o.debugger){debugger;delete o.debugger}o.document&&(c=o.document,delete o.document);let E=r?c.createElementNS(r,d.toLowerCase()):c.createElement(d);return E.constructor=b,s(E,f),g(E,o),a(E)(v),E}},A=Object.assign(b,{super:()=>{throw new Error("Can't invoke native elemenet constructors directly. Use document.createElement().")},extended:$,valueOf(){return`TagCreator: <${r||""}${r?"::":""}${d}>`}});return Object.defineProperty(b,Symbol.hasInstance,{value:G,writable:!0,configurable:!0}),Object.defineProperty(b,"name",{value:"<"+d+">"}),U[d]=A}return l.forEach(F),U},ge=()=>{var e;return document.createComment(M&&((e=new Error("promise").stack)==null?void 0:e.replace(/^Error: /,""))||"promise")},he=({error:e})=>document.createComment(e instanceof Error?e.toString():`Error:
`+JSON.stringify(e,null,2));function De(){let e=async function*(){}();for(;e;){if(Object.getOwnPropertyDescriptor(e,Symbol.asyncIterator)){K(e);break}e=Object.getPrototypeOf(e)}e||P.warn("Failed to augment the prototype of `(async function*())()`")}var ke=function(){ke=function(){},new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.removedNodes.forEach(n=>n&&n instanceof Element&&[...n.getElementsByTagName("*"),n].filter(r=>!r.ownerDocument.contains(r)).forEach(r=>{"onRemovedFromDOM"in r&&typeof r.onRemovedFromDOM=="function"&&r.onRemovedFromDOM()}))})}).observe(document.body,{subtree:!0,childList:!0})},Se=new Set;function Me(e,t){return e=e||document,t=t||{},e.querySelectorAll&&e.querySelectorAll("[id]").forEach(function(n){n.id&&(t[n.id]?M&&(Se.has(n.id)||(Se.add(n.id),P.info("(AI-UI)","Shadowed multiple element IDs",n.id,n,t[n.id]))):t[n.id]=n)}),t}
