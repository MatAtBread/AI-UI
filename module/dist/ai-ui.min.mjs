var ke=Object.defineProperty;var je=(e,t)=>{for(var n in t)ke(e,n,{get:t[n],enumerable:!0})};var M=globalThis.DEBUG=="*"||globalThis.DEBUG==!0||globalThis.DEBUG?.match(/(^|\W)AI-UI(\W|$)/)||!1;var J=5e3,v={log(...e){M&&console.log("(AI-UI) LOG:",...e)},warn(...e){M&&console.warn("(AI-UI) WARN:",...e)},info(...e){M&&console.trace("(AI-UI) INFO:",...e)}};var ve=e=>{};function fe(){let e=ve,t=ve,n=new Promise((...o)=>[e,t]=o);if(n.resolve=e,n.reject=t,M){let o=new Error().stack;n.catch(u=>u instanceof Error||u?.value instanceof Error?v.log("Deferred rejection",u,"allocated at ",o):void 0)}return n}function X(e){return e&&typeof e=="object"||typeof e=="function"}function F(e){return X(e)&&"then"in e&&typeof e.then=="function"}var Se={};je(Se,{Ignore:()=>D,Iterability:()=>_,asyncExtras:()=>z,asyncIterator:()=>pe,augmentGlobalAsyncGenerators:()=>Ve,combine:()=>Ae,debounceQueueIteratableIterator:()=>Pe,defineIterableProperty:()=>me,filterMap:()=>G,generatorHelpers:()=>He,isAsyncIter:()=>W,isAsyncIterable:()=>ee,isAsyncIterator:()=>Z,iterableHelpers:()=>$,merge:()=>te,queueIteratableIterator:()=>be});var _=Symbol("Iterability");function Z(e){return X(e)&&"next"in e&&typeof e?.next=="function"}function ee(e){return X(e)&&Symbol.asyncIterator in e&&typeof e[Symbol.asyncIterator]=="function"}function W(e){return ee(e)||Z(e)}function pe(e){if(ee(e))return e[Symbol.asyncIterator]();if(Z(e))return e;throw new Error("Not as async provider")}var z={filterMap(e,t=D){return G(this,e,t)},map:Ue,filter:We,unique:$e,waitFor:Ge,multi:Qe,initially:Fe,consume:we,merge(...e){return te(this,...e)},combine(e){return Ae(Object.assign({_this:this},e))}},ye=[...Object.getOwnPropertySymbols(z),...Object.keys(z)];function se(e,t){let n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(let o of n)Object.defineProperty(e,o,{...Object.getOwnPropertyDescriptor(t,o),enumerable:!1});return e}var k=Symbol("_pending"),U=Symbol("_items");function xe(e=()=>{}){let t={[k]:[],[U]:[],[Symbol.asyncIterator](){return t},next(){if(t[U]?.length)return Promise.resolve(t[U].shift());if(!t[k])return Promise.resolve({done:!0,value:void 0});let n=fe();return n.catch(o=>{}),t[k].unshift(n),n},return(n){let o={done:!0,value:void 0};if(t[k]){try{e()}catch{}for(;t[k].length;)t[k].pop().resolve(o);t[U]=t[k]=null}return Promise.resolve(o)},throw(...n){let o={done:!0,value:n[0]};if(t[k]){try{e()}catch{}for(;t[k].length;)t[k].pop().reject(o);t[U]=t[k]=null}return Promise.reject(o)},get length(){return t[U]?t[U].length:-1},push(n){return t[k]?(t[k].length?t[k].pop().resolve({done:!1,value:n}):t[U]?t[U].push({done:!1,value:n}):v.log("Discarding queue push as there are no consumers"),!0):!1}};return $(t)}var ae=Symbol("inflight");function De(e=()=>{}){let t=xe(e);return t[ae]=new Set,t.push=function(n){if(!t[k])return!1;if(t[ae].has(n))return!0;if(t[ae].add(n),t[k].length){let o=t[k].pop();o.finally(()=>t[ae].delete(n)),o.resolve({done:!1,value:n})}else t[U]?t[U].find(o=>o===n)||t[U].push({done:!1,value:n}):v.log("Discarding queue push as there are no consumers");return!0},t}var be=xe,Pe=De,Y=Symbol("_proxiedAsyncIterator");function me(e,t,n){let o=()=>{o=()=>j;let p=Pe(),C=p.multi(),j=C[Symbol.asyncIterator]();return s[Symbol.asyncIterator]=C[Symbol.asyncIterator],m=p.push,ye.forEach(N=>s[N]=j[N]),Y in I||se(I,s),j};function u(p){return{[p]:function(...C){return o(),I[p].apply(this,C)}}[p]}let s={[Symbol.asyncIterator]:o};ye.forEach(p=>s[p]=u(p)),typeof n=="object"&&n&&_ in n&&n[_]==="shallow"&&(s[_]=n[_]);let m=p=>(o(),m(p)),I=d(n,s),i;return Object.defineProperty(e,t,{get(){return I},set(p){if(p!==I)if(ee(p)){if(i===p)return;i=p;let C=M?new Error:void 0;M&&v.info(new Error(`Iterable "${t.toString()}" has been assigned to consume another iterator. Did you mean to declare it?`)),we.call(p,j=>{if(p!==i)throw new Error(`Piped iterable "${t.toString()}" has been replaced by another iterator`,{cause:C});m(j?.valueOf())}).catch(j=>v.info(j)).finally(()=>p===i&&(i=void 0));return}else i&&M&&v.log(`Iterable "${t.toString()}" is already piped from another iterator, and might be overrwitten later`),I=d(p,s);m(p?.valueOf())},enumerable:!0}),e;function d(p,C){if(p==null)return se(Object.create(null,{valueOf:{value(){return p},writable:!0},toJSON:{value(){return p},writable:!0}}),C);switch(typeof p){case"bigint":case"boolean":case"number":case"string":return se(Object(p),Object.assign(C,{toJSON(){return p.valueOf()}}));case"object":return K(p,C)}throw new TypeError('Iterable properties cannot be of type "'+typeof p+'"')}function f(p){return X(p)&&Y in p}function x(p,C){let j=C.split(".").slice(1);for(let N=0;N<j.length&&(p=p?.[j[N]])!==void 0;N++);return p}function K(p,C){let j,N;return new Proxy(p,oe());function oe(a=""){return{has(l,h){return h===Y||h===Symbol.toPrimitive||h in l||h in C},set(l,h,r,b){if(Object.hasOwn(C,h))throw new Error(`Cannot set ${t.toString()}${a}.${h.toString()} as it is part of asyncIterator`);return Reflect.get(l,h,b)!==r&&m({[Y]:{a:p,path:a}}),Reflect.set(l,h,r,b)},deleteProperty(l,h){return Reflect.deleteProperty(l,h)?(m({[Y]:{a:p,path:a}}),!0):!1},get(l,h,r){if(Object.hasOwn(C,h))return a.length?(j??(j=G(C,c=>f(c)?c[Y]:{a:c,path:""})),G(j,(c,P)=>{let Q=x(c.a,a);return P!==Q||c.path.startsWith(a)?Q:D},D,x(p,a))[h]):(N??(N=G(C,b=>f(b)?b[Y].a:b)),N[h]);if(h==="valueOf")return()=>x(p,a);if(h===Symbol.toPrimitive)return function(b){return Reflect.has(l,h)?Reflect.get(l,h,l).call(l,b):b==="string"?l.toString():b==="number"?Number(l):l.valueOf()};if(typeof h=="string"&&(!(h in l)||Object.hasOwn(l,h))&&!(_ in l&&l[_]==="shallow")){let b=Reflect.get(l,h,r);return typeof b=="function"||W(b)?b:new Proxy(Object(b),oe(a+"."+h))}return Reflect.get(l,h,r)}}}}}var te=(...e)=>{let t=new Array(e.length),n=new Array(e.length),o=()=>{o=()=>{};for(let i=0;i<e.length;i++){let d=e[i];n[i]=(t[i]=Symbol.asyncIterator in d?d[Symbol.asyncIterator]():d).next().then(f=>({idx:i,result:f}))}},u=[],s=new Promise(()=>{}),m=n.length,I={[Symbol.asyncIterator](){return I},next(){return o(),m?Promise.race(n).then(({idx:i,result:d})=>d.done?(m--,n[i]=s,u[i]=d.value,I.next()):(n[i]=t[i]?t[i].next().then(f=>({idx:i,result:f})).catch(f=>({idx:i,result:{done:!0,value:f}})):Promise.resolve({idx:i,result:{done:!0,value:void 0}}),d)).catch(i=>I.throw?.(i)??Promise.reject({done:!0,value:new Error("Iterator merge exception")})):Promise.resolve({done:!0,value:u})},async return(i){for(let d=0;d<t.length;d++)n[d]!==s&&(n[d]=s,u[d]=await t[d]?.return?.({done:!0,value:i}).then(f=>f.value,f=>f));return{done:!0,value:u}},async throw(i){for(let d=0;d<t.length;d++)n[d]!==s&&(n[d]=s,u[d]=await t[d]?.throw?.(i).then(f=>f.value,f=>f));return{done:!0,value:u}}};return $(I)},Ae=(e,t={})=>{let n={},o,u=[],s=0,m=new Promise(()=>{}),I={[Symbol.asyncIterator](){return I},next(){return o===void 0&&(o=Object.entries(e).map(([i,d],f)=>(s+=1,u[f]=d[Symbol.asyncIterator](),u[f].next().then(x=>({si:u,idx:f,k:i,ir:x}))))),function i(){return Promise.race(o).then(({idx:d,k:f,ir:x})=>x.done?(o[d]=m,s-=1,s?i():{done:!0,value:void 0}):(n[f]=x.value,o[d]=u[d].next().then(K=>({idx:d,k:f,ir:K})),t.ignorePartial&&Object.keys(n).length<Object.keys(e).length?i():{done:!1,value:n}))}()},return(i){return o.forEach((d,f)=>{d!==m&&u[f].return?.(i)}),Promise.resolve({done:!0,value:i})},throw(i){return o.forEach((d,f)=>{d!==m&&u[f].throw?.(i)}),Promise.reject({done:!0,value:i})}};return $(I)};function Re(e){return ee(e)&&ye.every(t=>t in e&&e[t]===z[t])}function $(e){return Re(e)||se(e,z),e}function He(e){return function(...t){let n=e(...t);return $(n)}}async function we(e){let t;for await(let n of this)t=e?.(n);await t}var D=Symbol("Ignore");function Le(e,t,n){if(F(e))return e.then(t,n);try{return t(e)}catch(o){return n(o)}}function G(e,t,n=D,o=D){let u,s={[Symbol.asyncIterator](){return s},next(...m){if(n!==D){let I=Promise.resolve({done:!1,value:n});return n=D,I}return new Promise(function I(i,d){u||(u=e[Symbol.asyncIterator]()),u.next(...m).then(f=>f.done?i(f):Le(t(f.value,o),x=>x===D?I(i,d):i({done:!1,value:o=x}),x=>{u.throw?u.throw(x):u.return?.(x),d({done:!0,value:x})}),f=>d({done:!0,value:f})).catch(f=>{u.throw?u.throw(f):u.return?.(f),d({done:!0,value:f})})})},throw(m){return Promise.resolve(u?.throw?u.throw(m):u?.return?.(m)).then(I=>({done:!0,value:I?.value}))},return(m){return Promise.resolve(u?.return?.(m)).then(I=>({done:!0,value:I?.value}))}};return $(s)}function Ue(e){return G(this,e)}function We(e){return G(this,async t=>await e(t)?t:D)}function $e(e){return e?G(this,async(t,n)=>n===D||await e(t,n)?t:D):G(this,(t,n)=>t===n?D:t)}function Fe(e){return G(this,t=>t,e)}function Ge(e){return G(this,t=>new Promise(n=>(e(()=>n(t)),t)))}function Qe(){let e=this,t=0,n,o;function u(m){m&&n.resolve(m),m?.done||(n=fe(),o.next().then(u).catch(I=>n.reject({done:!0,value:I})))}let s={[Symbol.asyncIterator](){return t+=1,s},next(){return o||(o=e[Symbol.asyncIterator](),u()),n},throw(m){if(t<1)throw new Error("AsyncIterator protocol error");return t-=1,t?Promise.resolve({done:!0,value:m}):Promise.resolve(o?.throw?o.throw(m):o?.return?.(m)).then(I=>({done:!0,value:I?.value}))},return(m){if(t<1)throw new Error("AsyncIterator protocol error");return t-=1,t?Promise.resolve({done:!0,value:m}):Promise.resolve(o?.return?.(m)).then(I=>({done:!0,value:I?.value}))}};return $(s)}function Ve(){let e=async function*(){}();for(;e;){if(Object.getOwnPropertyDescriptor(e,Symbol.asyncIterator)){$(e);break}e=Object.getPrototypeOf(e)}e||v.warn("Failed to augment the prototype of `(async function*())()`")}var ne=new Map;function qe(e){let t=ne.get(e.type);if(t)for(let n of t)try{let{push:o,terminate:u,container:s,selector:m}=n;if(s.isConnected){if(e.target instanceof Node)if(m){let I=s.querySelectorAll(m);for(let i of I)(e.target===i||i.contains(e.target))&&s.contains(i)&&o(e)}else(e.target===s||s.contains(e.target))&&o(e)}else{let I="Container `#"+s.id+">"+(m||"")+"` removed from DOM. Removing subscription";t.delete(n),u(new Error(I))}}catch(o){v.warn("docEventHandler",o)}}function he(e){return!!(e&&(e.startsWith("#")||e.startsWith(".")||e.startsWith("[")&&e.endsWith("]")))}function Te(e){let t=e.split(":");if(t.length===1)return he(t[0])?[t[0],"change"]:[null,t[0]];if(t.length===2&&he(t[1])&&!he(t[0]))return[t[1],t[0]]}function Ke(e){throw new Error(e)}function ge(e,t){let[n,o]=Te(t)??Ke("Invalid WhenSelector: "+t);ne.has(o)||(document.addEventListener(o,qe,{passive:!0,capture:!0}),ne.set(o,new Set));let u=be(()=>ne.get(o)?.delete(s)),s={push:u.push,terminate(m){u.return?.(m)},container:e,selector:n||null};return Ce(e,n?[n]:void 0).then(m=>ne.get(o).add(s)),u.multi()}async function*Oe(){await new Promise(()=>{}),yield void 0}function Ie(e){function t(n){return e.map(n)}return Object.assign($(t),{[Symbol.asyncIterator]:()=>e[Symbol.asyncIterator]()})}function Be(e){if(!e)throw new Error(`Falsy async source will never be ready

`+JSON.stringify(e));return typeof e=="string"&&e[0]!=="@"&&!!Te(e)}async function*Ye(e){yield e}function Ee(e,...t){if(!t||t.length===0)return Ie(ge(e,"change"));let n=t.filter(s=>typeof s!="string"||s[0]!=="@").map(s=>typeof s=="string"?ge(e,s):s instanceof Element?ge(s,"change"):F(s)?Ye(s):s);if(t.includes("@start")){let s={[Symbol.asyncIterator]:()=>s,next(){return s.next=()=>Promise.resolve({done:!0,value:void 0}),Promise.resolve({done:!1,value:{}})}};n.push(s)}if(t.includes("@ready")){let m=function(f){return typeof f=="string"&&!e.querySelector(f)};var u=m;let I=t.filter(Be).map(f=>Te(f)?.[0]).filter(m),i,d={[Symbol.asyncIterator](){return d},throw(f){return i?.throw?i.throw(f):Promise.resolve({done:!0,value:f})},return(f){return i?.return?i.return(f):Promise.resolve({done:!0,value:f})},next(){return i?i.next():Ce(e,I).then(()=>(i=(n.length>1?te(...n):n.length===1?n[0]:Oe())[Symbol.asyncIterator](),i?{done:!1,value:{}}:{done:!0,value:void 0}))}};return Ie($(d))}let o=n.length>1?te(...n):n.length===1?n[0]:Oe();return Ie($(o))}function Me(e){return e.isConnected?Promise.resolve():new Promise(t=>new MutationObserver((n,o)=>{n.some(u=>u.addedNodes?.length)&&e.isConnected&&(o.disconnect(),t())}).observe(document.body,{subtree:!0,childList:!0}))}function Ce(e,t){return t?.length?Promise.all([_e(e,t),Me(e)]):Me(e)}function _e(e,t){if(t=t.filter(o=>!e.querySelector(o)),!t.length)return Promise.resolve();let n=new Promise(o=>new MutationObserver((u,s)=>{u.some(m=>m.addedNodes?.length)&&t.every(m=>e.querySelector(m))&&(s.disconnect(),o())}).observe(e,{subtree:!0,childList:!0}));if(M){let o=new Error().stack?.replace(/^Error/,"Missing selectors after 5 seconds:"),u=setTimeout(()=>{v.warn(o,t)},J);n.finally(()=>clearTimeout(u))}return n}var ie=Symbol("Unique ID"),q=M?e=>`"${"innerHTML"in e?e.innerHTML:e.textContent}"`:e=>{},Ze=0,Je=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],Xe=Object.getOwnPropertyDescriptors({get ids(){return nt(this)},set ids(e){throw new Error("Cannot set ids on "+this.valueOf())},when:function(...e){return Ee(this,...e)}}),de=document.createElement("STYLE");de.id="--ai-ui-extended-tag-styles-";function le(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e instanceof Node||e instanceof NodeList||e instanceof HTMLCollection||e===null||e===void 0||Array.isArray(e)||F(e)||W(e)||typeof e=="object"&&Symbol.iterator in e&&typeof e[Symbol.iterator]=="function"}var re=Symbol("callStack"),ze=function(e,t,n){let[o,u,s]=typeof e=="string"||e===null?[e,t,n]:Array.isArray(e)?[null,e,t]:[null,Je,e],m=tt(document,"removedNodes"),I=s?.commonProperties,i=Object.create(null,Xe);Object.defineProperty(i,"attributes",{...Object.getOwnPropertyDescriptor(Element.prototype,"attributes"),set(a){if(W(a)){let l=Z(a)?a:a[Symbol.asyncIterator](),h=()=>l.next().then(({done:r,value:b})=>{p(this,b),r||h()},r=>v.warn(r));h()}else p(this,a)}}),I&&x(i,I);function d(...a){let l=[];return function h(r){if(!(r==null||r===D)){if(F(r)){let b=ce();l.push(b),r.then(c=>b.replaceWith(...d(c)),c=>{v.warn(c,q(b)),b.replaceWith(ue({error:c}))});return}if(r instanceof Node){l.push(r);return}if(r&&typeof r=="object"&&Symbol.iterator in r&&!(Symbol.asyncIterator in r)&&r[Symbol.iterator]){for(let b of r)h(b);return}if(W(r)){let b=M?`
`+new Error().stack?.replace(/^Error: /,"Insertion :"):"",c=Z(r)?r:r[Symbol.asyncIterator](),P=r.valueOf(),Q=P===void 0||P===r?[ce()]:d(P),y=Q.length?Q:[ce()];l.push(...y);let g=!0,T=Date.now()+J,A=M&&new Error("Created by").stack,L=w=>{let O=y.filter(R=>!!R?.parentNode);O.length?(y=[ue({error:w})],O[0].replaceWith(...y),O.slice(1).forEach(R=>R?.parentNode.removeChild(R))):v.warn("Can't report error",w,A,y.map(q)),y=[],c.return?.(L)},V=w=>{if(!w.done)try{let O=y.filter(E=>E?.parentNode&&E.isConnected),R=g?y:O;if(O.length&&(g=!1),!R.length||y.every(E=>m(E))){y=[];let E="Element(s) have been removed from the document: "+b;c.return?.(new Error(E));return}M&&g&&T&&T<Date.now()&&(T=Number.MAX_SAFE_INTEGER,v.warn("Async element not mounted after 5 seconds. If it is never mounted, it will leak.",A,y.map(q))),y=d(K(w.value)),y.length||y.push(ce()),R[0].replaceWith(...y),R.slice(1).forEach(E=>!y.includes(E)&&E.parentNode?.removeChild(E)),c.next().then(V).catch(L)}catch(O){y=[],c.return?.(O)}};c.next().then(V).catch(L);return}l.push(document.createTextNode(r.toString()))}}(a),l}o||Object.assign(ze,{nodes:d,UniqueID:ie});let f=Object.getPrototypeOf({});function x(a,l,h){if(!(l==null||typeof l!="object"||l===a))for(let[r,b]of Object.entries(Object.getOwnPropertyDescriptors(l)))try{if("value"in b){let c=b.value;c&&W(c)?Object.defineProperty(a,r,b):c&&typeof c=="object"&&!F(c)?r in a?c instanceof Node?(v.info("Having DOM Nodes as properties of other DOM Nodes is a bad idea as it makes the DOM tree into a cyclic graph. You should reference nodes by ID or as a child",r,q(c)),a[r]=c):a[r]!==c&&(Array.isArray(a[r])&&a[r].length!==c.length?c.constructor===Object||c.constructor===Array?x(a[r]=new c.constructor,c):a[r]=c:x(a[r],c)):(h&&(Object.getPrototypeOf(c)===f||!Object.getPrototypeOf(c)?x(b.value={},c):Array.isArray(c)?x(b.value=[],c):v.warn(`Declared propety '${r}' is not a plain object and must be assigned by reference, possibly polluting other instances of this tag`,a,c)),Object.defineProperty(a,r,b)):l[r]!==void 0&&(a[r]=l[r])}else Object.defineProperty(a,r,b)}catch(c){throw v.warn("deepAssign",r,l[r],c),c}}function K(a){let l=a?.valueOf();return Array.isArray(l)?Array.prototype.map.call(l,K):l}function p(a,l){re in l||function h(r,b){if(b==null||typeof b!="object")return;let c=Object.entries(Object.getOwnPropertyDescriptors(b));Array.isArray(b)||c.sort((y,g)=>{let T=Object.getOwnPropertyDescriptor(r,y[0]);if(T){if("value"in T)return-1;if("set"in T)return 1;if("get"in T)return .5}return 0});for(let[y,g]of c)try{if("value"in g){let T=g.value;W(T)?P(T,y):F(T)?T.then(A=>{A&&typeof A=="object"?W(A)?P(A,y):Q(A,y):b[y]!==void 0&&(r[y]=A)},A=>v.log("Failed to set attribute",A)):W(T)||(T&&typeof T=="object"&&!F(T)?Q(T,y):b[y]!==void 0&&(r[y]=b[y]))}else Object.defineProperty(r,y,g)}catch(T){throw v.warn("assignProps",y,b[y],T),T}function P(y,g){let T=pe(y),A=!0,L=Date.now()+J,V=M&&new Error("Created by").stack,w=E=>{if(!E.done){let S=K(E.value);if(typeof S=="object"&&S!==null){let B=Object.getOwnPropertyDescriptor(r,g);g==="style"||!B?.set?h(r[g],S):r[g]=S}else S!==void 0&&(r[g]=S);let H=a.isConnected;if(m(a)||!A&&!H){v.info(`Element does not exist in document when setting async attribute '${g}' to:
${q(a)}`),T.return?.();return}H&&(A=!1),A&&L&&L<Date.now()&&(L=Number.MAX_SAFE_INTEGER,v.warn(`Element with async attribute '${g}' not mounted after 5 seconds. If it is never mounted, it will leak.
Element contains: ${q(a)}
${V}`)),T.next().then(w).catch(O)}},O=E=>{v.warn("Dynamic attribute error",E,g,r,V,q(a)),T.return?.(E),a.appendChild(ue({error:E}))},R=y.valueOf();R!==void 0&&R!==y&&!W(R)?w({done:!1,value:R}):T.next().then(w).catch(O)}function Q(y,g){if(y instanceof Node)v.info("Having DOM Nodes as properties of other DOM Nodes is a bad idea as it makes the DOM tree into a cyclic graph. You should reference nodes by ID or via a collection such as .childNodes",g,q(y)),r[g]=y;else if(!(g in r)||r[g]===y||Array.isArray(r[g])&&r[g].length!==y.length)if(y.constructor===Object||y.constructor===Array){let T=new y.constructor;h(T,y),r[g]=T}else r[g]=y;else Object.getOwnPropertyDescriptor(r,g)?.set?r[g]=y:h(r[g],y)}}(a,l)}function C(a){for(let l=a.constructor;l;l=l.super)if(l===this)return!0;return!1}function j(a){let l=typeof a!="function"?g=>Object.assign({},a,g):a,h=Date.now().toString(36)+(Ze++).toString(36)+Math.random().toString(36).slice(2),r=l({[ie]:h});r.styles&&(de.appendChild(document.createTextNode(r.styles+`
`)),document.head.contains(de)||document.head.appendChild(de));let c=Object.assign((g,...T)=>{let A=le(g),L=[],V={[re]:(A?L:g[re])??L},w=A?this(V,g,...T):this(V,...T);w.constructor=c;let O=l({[ie]:h});if(V[re].push(O),M){let E=function(S,H){for(let B=S;B;B=B.super)if(B.definition?.declare&&H in B.definition.declare)return!0;return!1};var R=E;if(O.declare){let S=Object.keys(O.declare).filter(H=>H in w||E(this,H));S.length&&v.log(`Declared keys '${S}' in ${c.name} already exist in base '${this.valueOf()}'`)}if(O.override){let S=Object.keys(O.override).filter(H=>!(H in w)&&!(I&&H in I)&&!E(this,H));S.length&&v.log(`Overridden keys '${S}' in ${c.name} do not exist in base '${this.valueOf()}'`)}}if(x(w,O.declare,!0),x(w,O.override),O.iterable&&Object.keys(O.iterable).forEach(E=>{E in w?v.log(`Ignoring attempt to re-define iterable property "${E}" as it could already have consumers`):me(w,E,O.iterable[E])}),V[re]===L){A||p(w,g);for(let E of L){let S=E?.constructed?.call(w);le(S)&&w.append(...d(S))}for(let E of L)if(E.iterable){for(let S of Object.keys(E.iterable))if(!(!A&&S in g&&(!F(g[S])||!W(g[S])))){let H=w[S];H?.valueOf()!==void 0&&(w[S]=H)}}}return w},{super:this,definition:Object.assign(r,{[ie]:h}),extended:j,valueOf:()=>{let g=[...Object.keys(r.declare||{}),...Object.keys(r.iterable||{})];return`${c.name}: {${g.join(", ")}}
 \u21AA ${this.valueOf()}`}});Object.defineProperty(c,Symbol.hasInstance,{value:C,writable:!0,configurable:!0});let P={};(function g(T){T?.super&&g(T.super);let A=T.definition;A&&(x(P,A?.override),x(P,A?.declare))})(this),x(P,r.override),x(P,r.declare),Object.defineProperties(c,Object.getOwnPropertyDescriptors(P));let Q=P&&"className"in P&&typeof P.className=="string"?P.className:h,y=M?new Error().stack?.split(`
`)[2]??"":"";if(Object.defineProperty(c,"name",{value:"<ai-"+Q.replace(/\s+/g,"-")+y+">"}),M){let g=Object.keys(r).filter(T=>!["styles","ids","constructed","declare","override","iterable"].includes(T));g.length&&v.log(`${c.name} defines extraneous keys '${g}', which are unknown`)}return c}let N={createElement(a,l,...h){return a===N.createElement?d(...h):typeof a=="function"?a(l,h):typeof a=="string"&&a in N?N[a](l,h):a instanceof Node?a:ue({error:new Error("Illegal type in createElement:"+a)})}};function oe(a){if(N[a])return N[a];let l=(r,...b)=>{let c=document;if(le(r)&&(b.unshift(r),r={}),!le(r)){if(r.debugger){debugger;delete r.debugger}r.document&&(c=r.document,delete r.document);let P=o?c.createElementNS(o,a.toLowerCase()):c.createElement(a);return P.constructor=l,x(P,i),p(P,r),P.append(...d(...b)),P}},h=Object.assign(l,{super:()=>{throw new Error("Can't invoke native elemenet constructors directly. Use document.createElement().")},extended:j,valueOf(){return`TagCreator: <${o||""}${o?"::":""}${a}>`}});return Object.defineProperty(l,Symbol.hasInstance,{value:C,writable:!0,configurable:!0}),Object.defineProperty(l,"name",{value:"<"+a+">"}),N[a]=h}return u.forEach(oe),N};function ce(){return document.createComment(M&&new Error("promise").stack?.replace(/^Error: /,"")||"promise")}function ue({error:e}){return document.createComment(e instanceof Error?e.toString():`Error:
`+JSON.stringify(e,null,2))}var et=function(){et=function(){},new MutationObserver(e=>{e.forEach(function(t){t.type==="childList"&&t.removedNodes.forEach(n=>n&&n instanceof Element&&[...n.getElementsByTagName("*"),n].filter(o=>!o.isConnected).forEach(o=>{"onRemovedFromDOM"in o&&typeof o.onRemovedFromDOM=="function"&&o.onRemovedFromDOM()}))})}).observe(document.body,{subtree:!0,childList:!0})};function tt(e,t){let n=new WeakSet;function o(u){for(let s of u)t==="addedNodes"===s.isConnected&&(o(s.childNodes),n.add(s))}return new MutationObserver(u=>{u.forEach(function(s){s.type==="childList"&&s.removedNodes.length&&o(s[t])})}).observe(e,{subtree:!0,childList:!0}),function(u){return n.has(u)}}var Ne=new Set;function nt(e,t){return e=e||document,t=t||Object.create(null),e.querySelectorAll&&e.querySelectorAll("[id]").forEach(function(n){n.id&&(t[n.id]?M&&(Ne.has(n.id)||(Ne.add(n.id),v.info("Shadowed multiple element IDs",n.id))):t[n.id]=n)}),t}export{Se as Iterators,ie as UniqueID,et as enableOnRemovedFromDOM,nt as getElementIdMap,ze as tag,Ee as when};
