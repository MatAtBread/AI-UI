var AIUI;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Iterators:()=>r,augmentGlobalAsyncGenerators:()=>J,enableOnRemovedFromDOM:()=>Y,getElementIdMap:()=>K,tag:()=>W,when:()=>M});var r={};e.r(r),e.d(r,{Ignore:()=>I,Iterability:()=>b,asyncIterator:()=>d,combine:()=>v,defineIterableProperty:()=>m,filterMap:()=>j,generatorHelpers:()=>w,isAsyncIter:()=>f,isAsyncIterable:()=>u,isAsyncIterator:()=>l,iterableHelpers:()=>g,merge:()=>p,queueIteratableIterator:()=>h});const n="*"==globalThis.DEBUG||1==globalThis.DEBUG||globalThis.DEBUG?.match(/(^|\W)AI-UI(\W|$)/)||!1,o=5e3,i={log(...e){n&&console.log("(AI-UI) LOG:",...e)},warn(...e){n&&console.warn("(AI-UI) WARN:",...e)},info(...e){n&&console.debug("(AI-UI) INFO:",...e)}},s=e=>{};function a(){let e=s,t=s;const r=new Promise(((...r)=>[e,t]=r));if(r.resolve=e,r.reject=t,n){const e=(new Error).stack;r.catch((t=>t instanceof Error||t?.value instanceof Error?i.log("Deferred rejection",t,"allocated at ",e):void 0))}return r}function c(e){return null!=e&&"function"==typeof e.then}function l(e){return"function"==typeof e?.next}function u(e){return e&&e[Symbol.asyncIterator]&&"function"==typeof e[Symbol.asyncIterator]}function f(e){return u(e)||l(e)}function d(e){if(u(e))return e[Symbol.asyncIterator]();if(l(e))return e;throw new Error("Not as async provider")}const y={filterMap:j,map:function(e){return j(this,e)},filter:function(e){return j(this,(async t=>await e(t)?t:I))},unique:function(e){return j(this,e?async(t,r)=>r===I||await e(t,r)?t:I:(e,t)=>e===t?I:e)},waitFor:function(e){return j(this,(t=>new Promise((r=>(e((()=>r(t))),t)))))},multi:function(){const e=this;let t,r,n=0;function o(e){e&&t.resolve(e),e?.done||(t=a(),r.next().then(o).catch((e=>t.reject({done:!0,value:e}))))}const i={[Symbol.asyncIterator]:()=>(n+=1,i),next:()=>(r||(r=e[Symbol.asyncIterator](),o()),t),throw(e){if(n<1)throw new Error("AsyncIterator protocol error");return n-=1,n?Promise.resolve({done:!0,value:e}):Promise.resolve(r?.throw?r.throw(e):r?.return?.(e)).then((e=>({done:!0,value:e?.value})))},return(e){if(n<1)throw new Error("AsyncIterator protocol error");return n-=1,n?Promise.resolve({done:!0,value:e}):Promise.resolve(r?.return?.(e)).then((e=>({done:!0,value:e?.value})))}};return g(i)},initially:function(e){return j(this,(e=>e),e)},consume:O,merge(...e){return p(this,...e)},combine(e){return v(Object.assign({_this:this},e))}};function h(e=(()=>{})){let t=[],r=[];const n={[Symbol.asyncIterator]:()=>n,next(){if(r?.length)return Promise.resolve({done:!1,value:r.shift()});const e=a();return e.catch((e=>{})),t.push(e),e},return(){const n={done:!0,value:void 0};if(t){try{e()}catch(e){}for(;t.length;)t.shift().resolve(n);r=t=null}return Promise.resolve(n)},throw(...n){const o={done:!0,value:n[0]};if(t){try{e()}catch(e){}for(;t.length;)t.shift().reject(o);r=t=null}return Promise.reject(o)},push:e=>!!t&&(t.length?t.shift().resolve({done:!1,value:e}):r?r.push(e):i.log("Discarding queue push as there are no consumers"),!0)};return g(n)}const b=Symbol("Iterability");function m(e,t,r){let o=()=>{o=()=>r;const e=h(),t=e.multi(),r=t[Symbol.asyncIterator]();return s[Symbol.asyncIterator]={value:t[Symbol.asyncIterator],enumerable:!1,writable:!1},a=e.push,Object.keys(y).forEach((e=>s[e]={value:r[e],enumerable:!1,writable:!1})),Object.defineProperties(c,s),r};const s={[Symbol.asyncIterator]:{enumerable:!1,writable:!0,value:o}};Object.keys(y).forEach((e=>{return s[e]={enumerable:!1,writable:!0,value:(t=e,function(...e){return o(),c[t].call(this,...e)})};var t}));let a=e=>(o(),a(e));"object"==typeof r&&r&&b in r&&(s[b]=Object.getOwnPropertyDescriptor(r,b));let c=f(r,s),l=!1;return Object.defineProperty(e,t,{get:()=>c,set(e){if(e!==c){if(l)throw new Error(`Iterable "${t.toString()}" is already consuming another iterator`);u(e)?(l=!0,n&&i.info("(AI-UI)",new Error(`Iterable "${t.toString()}" has been assigned to consume another iterator. Did you mean to declare it?`)),O.call(e,(e=>{a(e?.valueOf())})).finally((()=>l=!1))):c=f(e,s)}a(e?.valueOf())},enumerable:!0}),e;function f(r,o){let s=I;if(null==r)return Object.create(null,{...o,valueOf:{value:()=>r,writable:!0},toJSON:{value:()=>r,writable:!0}});switch(typeof r){case"object":return Symbol.asyncIterator in r?r:(s===I?(n&&i.info("(AI-UI)",`The iterable property '${t.toString()}' of type "object" will be spread to prevent re-initialisation.\n${(new Error).stack?.slice(6)}`),s=Array.isArray(r)?Object.defineProperties([...r],o):Object.defineProperties({...r},o)):Object.assign(s,r),"shallow"===s[b]?s:new Proxy(s,{set:(r,n,o,i)=>!!Reflect.set(r,n,o,i)&&(a(e[t]),!0),get(e,t,r){if("valueOf"===t)return()=>s;const n=Reflect.getOwnPropertyDescriptor(e,t);if(void 0===n||n.enumerable){void 0===n&&(e[t]=void 0);const o=Reflect.get(s,t,r),i=Object.getOwnPropertyDescriptors(s.map(((e,r)=>{const n=e?.[t]?.valueOf(),o=r?.valueOf();return typeof n==typeof o&&n==o?I:n})));return Reflect.ownKeys(i).forEach((e=>i[e].enumerable=!1)),f(o,i)}return Reflect.get(e,t,r)}}));case"bigint":case"boolean":case"number":case"string":return Object.defineProperties(Object(r),{...o,toJSON:{value:()=>r.valueOf(),writable:!0}})}throw new TypeError('Iterable properties cannot be of type "'+typeof r+'"')}}const p=(...e)=>{const t=new Array(e.length),r=new Array(e.length);let n=()=>{n=()=>{};for(let n=0;n<e.length;n++){const o=e[n];r[n]=(t[n]=Symbol.asyncIterator in o?o[Symbol.asyncIterator]():o).next().then((e=>({idx:n,result:e})))}};const o=[],i=new Promise((()=>{}));let s=r.length;const a={[Symbol.asyncIterator]:()=>a,next:()=>(n(),s?Promise.race(r).then((({idx:e,result:n})=>n.done?(s--,r[e]=i,o[e]=n.value,a.next()):(r[e]=t[e]?t[e].next().then((t=>({idx:e,result:t}))).catch((t=>({idx:e,result:{done:!0,value:t}}))):Promise.resolve({idx:e,result:{done:!0,value:void 0}}),n))).catch((e=>a.throw?.(e)??Promise.reject({done:!0,value:new Error("Iterator merge exception")}))):Promise.resolve({done:!0,value:o})),async return(e){for(let n=0;n<t.length;n++)r[n]!==i&&(r[n]=i,o[n]=await(t[n]?.return?.({done:!0,value:e}).then((e=>e.value),(e=>e))));return{done:!0,value:o}},async throw(e){for(let n=0;n<t.length;n++)r[n]!==i&&(r[n]=i,o[n]=await(t[n]?.throw?.(e).then((e=>e.value),(e=>e))));return{done:!0,value:o}}};return g(a)},v=(e,t={})=>{const r={};let n,o=[],i=0;const s=new Promise((()=>{})),a={[Symbol.asyncIterator]:()=>a,next:()=>(void 0===n&&(n=Object.entries(e).map((([e,t],r)=>(i+=1,o[r]=t[Symbol.asyncIterator](),o[r].next().then((t=>({si:o,idx:r,k:e,ir:t}))))))),function a(){return Promise.race(n).then((({idx:c,k:l,ir:u})=>u.done?(n[c]=s,i-=1,i?a():{done:!0,value:void 0}):(r[l]=u.value,n[c]=o[c].next().then((e=>({idx:c,k:l,ir:e}))),t.ignorePartial&&Object.keys(r).length<Object.keys(e).length?a():{done:!1,value:r})))}()),return:e=>(n.forEach(((t,r)=>{t!==s&&o[r].return?.(e)})),Promise.resolve({done:!0,value:e})),throw:e=>(n.forEach(((t,r)=>{t!==s&&o[r].throw?.(e)})),Promise.reject({done:!0,value:e}))};return g(a)};function g(e){var t;return u(t=e)&&Object.keys(y).every((e=>e in t&&t[e]===y[e]))||Object.defineProperties(e,Object.fromEntries(Object.entries(Object.getOwnPropertyDescriptors(y)).map((([e,t])=>[e,{...t,enumerable:!1}])))),e}function w(e){return function(...t){return g(e(...t))}}async function O(e){let t;for await(const r of this)t=e?.(r);await t}const I=Symbol("Ignore");function j(e,t,r=I){let n,o=I;const i={[Symbol.asyncIterator]:()=>i,next(...i){if(r!==I){const e=Promise.resolve({done:!1,value:r});return r=I,e}return new Promise((function r(s,a){n||(n=e[Symbol.asyncIterator]()),n.next(...i).then((e=>e.done?s(e):Promise.resolve(t(e.value,o)).then((e=>e===I?r(s,a):s({done:!1,value:o=e})),(e=>{n.throw?n.throw(e):n.return?.(e),a({done:!0,value:e})}))),(e=>a({done:!0,value:e}))).catch((e=>{n.throw?n.throw(e):n.return?.(e),a({done:!0,value:e})}))}))},throw:e=>Promise.resolve(n?.throw?n.throw(e):n?.return?.(e)).then((e=>({done:!0,value:e?.value}))),return:e=>Promise.resolve(n?.return?.(e)).then((e=>({done:!0,value:e?.value})))};return g(i)}const P=new Map;function E(e){const t=P.get(e.type);if(t)for(const r of t)try{const{push:n,terminate:o,container:i,selector:s}=r;if(document.body.contains(i)){if(e.target instanceof Node)if(s){const t=i.querySelectorAll(s);for(const r of t)(e.target===r||r.contains(e.target))&&i.contains(r)&&n(e)}else(e.target===i||i.contains(e.target))&&n(e)}else{const e="Container `#"+i.id+">"+(s||"")+"` removed from DOM. Removing subscription";t.delete(r),o(new Error(e))}}catch(e){i.warn("(AI-UI)","docEventHandler",e)}}function S(e){return Boolean(e&&(e.startsWith("#")||e.startsWith(".")||e.startsWith("[")&&e.endsWith("]")))}function A(e){const t=e.split(":");return 1===t.length?S(t[0])?[t[0],"change"]:[null,t[0]]:2===t.length&&S(t[1])&&!S(t[0])?[t[1],t[0]]:void 0}function D(e,t){const[r,n]=A(t)??function(e){throw new Error(e)}("Invalid WhenSelector: "+t);P.has(n)||(document.addEventListener(n,E,{passive:!0,capture:!0}),P.set(n,new Set));const o=h((()=>P.get(n)?.delete(i))),i={push:o.push,terminate(e){o.return?.(e)},container:e,selector:r||null};return $(e,r?[r]:void 0).then((e=>P.get(n).add(i))),o.multi()}async function*x(){await new Promise((()=>{})),yield}function N(e){return Object.assign(g((function(t){return e.map(t)})),{[Symbol.asyncIterator]:()=>e[Symbol.asyncIterator]()})}function k(e){if(!e)throw new Error("Falsy async source will never be ready\n\n"+JSON.stringify(e));return"string"==typeof e&&"@"!==e[0]&&Boolean(A(e))}function M(e,...t){if(!t||0===t.length)return N(D(e,"change"));const r=t.filter((e=>"string"!=typeof e||"@"!==e[0])).map((t=>"string"==typeof t?D(e,t):t instanceof Element?D(t,"change"):c(t)?async function*(e){yield e}(t):t));if(t.includes("@start")){const n={[Symbol.asyncIterator]:()=>n,next:()=>(n.next=()=>Promise.resolve({done:!0,value:void 0}),Promise.resolve({done:!1,value:{}}))};r.push(n)}if(t.includes("@ready")){function o(t){return Boolean("string"==typeof t&&!e.querySelector(t))}const i=t.filter(k).map((e=>A(e)?.[0])).filter(o),s={[Symbol.asyncIterator]:()=>s,async next(){await $(e,i);const t=(r.length>1?p(...r):1===r.length?r[0]:x())[Symbol.asyncIterator]();return t?(s.next=t.next.bind(t),s.return=t.return?.bind(t),s.throw=t.throw?.bind(t),{done:!1,value:{}}):{done:!0,value:void 0}}};return N(g(s))}return N(g(r.length>1?p(...r):1===r.length?r[0]:x()))}function U(e){return document.body.contains(e)?Promise.resolve():new Promise((t=>new MutationObserver(((r,n)=>{r.some((e=>e.addedNodes?.length))&&document.body.contains(e)&&(n.disconnect(),t())})).observe(document.body,{subtree:!0,childList:!0})))}function $(e,t){return t?.length?Promise.all([T(e,t),U(e)]):U(e)}function T(e,t){if(!(t=t.filter((t=>!e.querySelector(t)))).length)return Promise.resolve();const r=new Promise((r=>new MutationObserver(((n,o)=>{n.some((e=>e.addedNodes?.length))&&t.every((t=>e.querySelector(t)))&&(o.disconnect(),r())})).observe(e,{subtree:!0,childList:!0})));if(n){const e=(new Error).stack?.replace(/^Error/,"Missing selectors after 5 seconds:"),n=setTimeout((()=>{i.warn("(AI-UI)",e,t)}),o);r.finally((()=>clearTimeout(n)))}return r}const C=Symbol("Unique ID");let q=0;const R=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],F={get ids(){return K(this)},set ids(e){throw new Error("Cannot set ids on "+this.valueOf())},when:function(...e){return M(this,...e)}},G=document.createElement("STYLE");function L(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"function"==typeof e||e instanceof Node||e instanceof NodeList||e instanceof HTMLCollection||null==e||Array.isArray(e)||c(e)||f(e)||"function"==typeof e[Symbol.iterator]}G.id="--ai-ui-extended-tag-styles";const B=Symbol("callStack"),W=function(e,t,r){const[s,a,u]="string"==typeof e||null===e?[e,t,r]:Array.isArray(e)?[null,e,t]:[null,R,e],y=Object.create(null,Object.getOwnPropertyDescriptors(F));function h(...e){const t=[];return function e(r){if(null!=r&&r!==I){if(c(r)){let e=[_()];return t.push(e[0]),void r.then((t=>{const r=h(t),n=e;n[0].parentNode&&(b(n[0].parentNode,n[0])(r),n.forEach((e=>e.parentNode?.removeChild(e)))),e=r}),(t=>{i.warn("(AI-UI)",t,e);const r=e[0];r&&r.parentNode?.replaceChild(H({error:t}),r)}))}if(r instanceof Node)t.push(r);else if(f(r)){const e=n?"\n"+(new Error).stack?.replace(/^Error: /,"Insertion :"):"",s=l(r)?r:r[Symbol.asyncIterator](),a=r.valueOf(),c=void 0===a||a===r?[_()]:h(a);t.push(...c);let u=c,f=!0,d=Date.now()+o;const y=e=>{const t=u.filter((e=>Boolean(e?.parentNode)));t.length?(u=b(t[0].parentNode,t[0])(H({error:e})),t.forEach((e=>!u.includes(e)&&e.parentNode.removeChild(e)))):i.warn("(AI-UI)","Can't report error",e,u)},m=t=>{if(!t.done)try{const r=u.filter((e=>e?.parentNode&&e.ownerDocument?.body.contains(e))),n=f?u:r;if(r.length&&(f=!1),!n.length)throw new Error("Element(s) do not exist in document"+e);f&&d&&d<Date.now()&&(d=Number.MAX_SAFE_INTEGER,i.log("Async element not mounted after 5 seconds. If it is never mounted, it will leak.",u));const o=h(g(t.value));u=b(n[0].parentNode,n[0])(o.length?o:_()),n.forEach((e=>!u.includes(e)&&e.parentNode.removeChild(e))),s.next().then(m).catch(y)}catch(e){s.return?.(e)}};s.next().then(m).catch(y)}else if("object"==typeof r&&r?.[Symbol.iterator])for(const t of r)e(t);else t.push(document.createTextNode(r.toString()))}}(e),t}function b(e,t){return void 0===t&&(t=null),function(r){const n=h(r);if(t)if(t instanceof Element)Element.prototype.before.call(t,...n);else{const r=t.parentNode;if(!r)throw new Error("Parent is null");r!==e&&i.warn("(AI-UI)","Internal error - container mismatch");for(let e=0;e<n.length;e++)r.insertBefore(n[e],t)}else Element.prototype.append.call(e,...n);return n}}Object.defineProperty(y,"attributes",{...Object.getOwnPropertyDescriptor(Element.prototype,"attributes"),set(e){if(f(e)){const t=l(e)?e:e[Symbol.asyncIterator](),r=()=>t.next().then((({done:e,value:t})=>{w(this,t),e||r()}),(e=>i.warn("(AI-UI)",e)));r()}else w(this,e)}}),u&&v(y,u),s||Object.assign(W,{appender:b,nodes:h,UniqueID:C,augmentGlobalAsyncGenerators:J});const p=Object.getPrototypeOf({});function v(e,t,r){if(null!=t&&"object"==typeof t&&t!==e)for(const[n,o]of Object.entries(Object.getOwnPropertyDescriptors(t)))try{if("value"in o){const s=o.value;s&&f(s)?Object.defineProperty(e,n,o):s&&"object"==typeof s&&!c(s)?n in e?s instanceof Node?(i.info("Having DOM Nodes as properties of other DOM Nodes is a bad idea as it makes the DOM tree into a cyclic graph. You should reference nodes by ID or as a child",n,s),e[n]=s):e[n]!==s&&(Array.isArray(e[n])&&e[n].length!==s.length?s.constructor===Object||s.constructor===Array?v(e[n]=new s.constructor,s):e[n]=s:v(e[n],s)):(r&&(Object.getPrototypeOf(s)!==p&&Object.getPrototypeOf(s)?Array.isArray(s)?v(o.value=[],s):i.warn(`Declared propety '${n}' is not a plain object and must be assigned by reference, possibly polluting other instances of this tag`,e,s):v(o.value={},s)),Object.defineProperty(e,n,o)):void 0!==t[n]&&(e[n]=t[n])}else Object.defineProperty(e,n,o)}catch(e){throw i.warn("(AI-UI)","deepAssign",n,t[n],e),e}}function g(e){const t=e?.valueOf();return Array.isArray(t)?t.map(g):t}function w(e,t){B in t||function t(r,n){if(null==n||"object"!=typeof n)return;const s=Object.entries(Object.getOwnPropertyDescriptors(n));s.sort(((e,t)=>{const n=Object.getOwnPropertyDescriptor(r,e[0]);if(n){if("value"in n)return-1;if("set"in n)return 1;if("get"in n)return.5}return 0}));for(const[e,t]of s)try{if("value"in t){const o=t.value;f(o)?a(o,e):c(o)?o.then((t=>{t&&"object"==typeof t?f(t)?a(t,e):l(t,e):void 0!==n[e]&&(r[e]=n[e])}),(e=>i.log("Failed to set attribute",e))):f(o)||(o&&"object"==typeof o&&!c(o)?l(o,e):void 0!==n[e]&&(r[e]=n[e]))}else Object.defineProperty(r,e,t)}catch(t){throw i.warn("(AI-UI)","assignProps",e,n[e],t),t}function a(n,s){const a=d(n);let c=!0,l=Date.now()+o;const u=n=>{if(!n.done){const o=g(n.value);if("object"==typeof o&&null!==o){const e=Object.getOwnPropertyDescriptor(r,s);"style"!==s&&e?.set?r[s]=o:t(r[s],o)}else void 0!==o&&(r[s]=o);const d=e.ownerDocument.contains(e);if(!c&&!d){const e=`Element does not exist in document when setting async attribute '${s}'`;return void a.return?.(new Error(e))}d&&(c=!1),c&&l&&l<Date.now()&&(l=Number.MAX_SAFE_INTEGER,i.log(`Element with async attribute '${s}' not mounted after 5 seconds. If it is never mounted, it will leak.`,e)),a.next().then(u).catch(f)}},f=t=>{a.return?.(t),i.warn("(AI-UI)","Dynamic attribute error",t,s,r,e),b(e)(H({error:t}))};a.next().then(u).catch(f)}function l(e,n){if(e instanceof Node)i.info("Having DOM Nodes as properties of other DOM Nodes is a bad idea as it makes the DOM tree into a cyclic graph. You should reference nodes by ID or via a collection such as .childNodes",n,e),r[n]=e;else if(!(n in r)||r[n]===e||Array.isArray(r[n])&&r[n].length!==e.length)if(e.constructor===Object||e.constructor===Array){const o=new e.constructor;t(o,e),r[n]=o}else r[n]=e;else Object.getOwnPropertyDescriptor(r,n)?.set?r[n]=e:t(r[n],e)}}(e,t)}function O(e){for(let t=e.constructor;t;t=t.super)if(t===this)return!0;return!1}function j(e){const t="function"!=typeof e?t=>Object.assign({},e,t):e,r=Date.now().toString(36)+(q++).toString(36)+Math.random().toString(36).slice(2);let o=t({[C]:r});o.styles&&(G.appendChild(document.createTextNode(o.styles+"\n")),document.head.contains(G)||document.head.appendChild(G));const s=Object.assign(((e,...o)=>{const a=L(e),l=[],d={[B]:(a?l:e[B])??l},y=a?this(d,e,...o):this(d,...o);y.constructor=s;const h=t({[C]:r});if(d[B].push(h),n){function p(e,t){for(let r=e;r;r=r.super)if(r.definition?.declare&&t in r.definition.declare)return!0;return!1}if(h.declare){const g=Object.keys(h.declare).filter((e=>e in y||p(this,e)));g.length&&i.log(`Declared keys '${g}' in ${s.name} already exist in base '${this.valueOf()}'`)}if(h.override){const O=Object.keys(h.override).filter((e=>!(e in y||u&&e in u||p(this,e))));O.length&&i.log(`Overridden keys '${O}' in ${s.name} do not exist in base '${this.valueOf()}'`)}}if(v(y,h.declare,!0),v(y,h.override),h.iterable&&Object.keys(h.iterable).forEach((e=>{e in y?i.log(`Ignoring attempt to re-define iterable property "${e}" as it could already have consumers`):m(y,e,h.iterable[e])})),d[B]===l){a||w(y,e);for(const I of l){const j=I?.constructed?.call(y);L(j)&&b(y)(j)}for(const P of l)if(P.iterable)for(const E of Object.keys(P.iterable))if(a||!(E in e)||c(e[E])&&f(e[E])){const S=y[E];void 0!==S?.valueOf()&&(y[E]=S)}}return y}),{super:this,definition:Object.assign(o,{[C]:r}),extended:j,valueOf:()=>{const e=[...Object.keys(o.declare||{}),...Object.keys(o.iterable||{})];return`${s.name}: {${e.join(", ")}}\n ↪ ${this.valueOf()}`}});Object.defineProperty(s,Symbol.hasInstance,{value:O,writable:!0,configurable:!0});const a={};!function e(t){t?.super&&e(t.super);const r=t.definition;r&&(v(a,r?.override),v(a,r?.declare))}(this),v(a,o.override),v(a,o.declare),Object.defineProperties(s,Object.getOwnPropertyDescriptors(a));const l=a&&"className"in a&&"string"==typeof a.className?a.className:r,d=n?(new Error).stack?.split("\n")[2]??"":"";if(Object.defineProperty(s,"name",{value:"<ai-"+l.replace(/\s+/g,"-")+d+">"}),n){const e=Object.keys(o).filter((e=>!["styles","ids","constructed","declare","override","iterable"].includes(e)));e.length&&i.log(`${s.name} defines extraneous keys '${e}', which are unknown`)}return s}const P={};return a.forEach((function(e){if(P[e])return P[e];const t=(r,...n)=>{let o=document;if(L(r)&&(n.unshift(r),r={}),!L(r)){r.debugger&&delete r.debugger,r.document&&(o=r.document,delete r.document);const i=s?o.createElementNS(s,e.toLowerCase()):o.createElement(e);return i.constructor=t,v(i,y),w(i,r),b(i)(n),i}},r=Object.assign(t,{super:()=>{throw new Error("Can't invoke native elemenet constructors directly. Use document.createElement().")},extended:j,valueOf:()=>`TagCreator: <${s||""}${s?"::":""}${e}>`});return Object.defineProperty(t,Symbol.hasInstance,{value:O,writable:!0,configurable:!0}),Object.defineProperty(t,"name",{value:"<"+e+">"}),P[e]=r})),P},_=()=>document.createComment(n&&new Error("promise").stack?.replace(/^Error: /,"")||"promise"),H=({error:e})=>document.createComment(e instanceof Error?e.toString():"Error:\n"+JSON.stringify(e,null,2));function J(){let e=async function*(){}();for(;e;){if(Object.getOwnPropertyDescriptor(e,Symbol.asyncIterator)){g(e);break}e=Object.getPrototypeOf(e)}e||i.warn("Failed to augment the prototype of `(async function*())()`")}let Y=function(){Y=function(){},new MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&e.removedNodes.forEach((e=>e&&e instanceof Element&&[...e.getElementsByTagName("*"),e].filter((e=>!e.ownerDocument.contains(e))).forEach((e=>{"onRemovedFromDOM"in e&&"function"==typeof e.onRemovedFromDOM&&e.onRemovedFromDOM()}))))}))})).observe(document.body,{subtree:!0,childList:!0})};const X=new Set;function K(e,t){return e=e||document,t=t||{},e.querySelectorAll&&e.querySelectorAll("[id]").forEach((function(e){e.id&&(t[e.id]?n&&(X.has(e.id)||(X.add(e.id),i.info("(AI-UI)","Shadowed multiple element IDs",e.id,e,t[e.id]))):t[e.id]=e)})),t}AIUI=t})();