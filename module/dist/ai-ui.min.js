"use strict";var AIUI=(()=>{var ye=Object.defineProperty;var Le=Object.getOwnPropertyDescriptor;var Ue=Object.getOwnPropertyNames;var We=Object.prototype.hasOwnProperty;var Pe=(e,t)=>{for(var n in t)ye(e,n,{get:t[n],enumerable:!0})},$e=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ue(t))!We.call(e,s)&&s!==n&&ye(e,s,{get:()=>t[s],enumerable:!(o=Le(t,s))||o.enumerable});return e};var Fe=e=>$e(ye({},"__esModule",{value:!0}),e);var lt={};Pe(lt,{Iterators:()=>Ie,UniqueID:()=>oe,enableOnRemovedFromDOM:()=>Re,getElementIdMap:()=>He,tag:()=>De,when:()=>le});var M=globalThis.DEBUG=="*"||globalThis.DEBUG==!0||globalThis.DEBUG?.match(/(^|\W)AI-UI(\W|$)/)||!1;var J=5e3,v={log(...e){M&&console.log("(AI-UI) LOG:",...e)},warn(...e){M&&console.warn("(AI-UI) WARN:",...e)},info(...e){M&&console.trace("(AI-UI) INFO:",...e)}};var Ae=e=>{};function pe(){let e=Ae,t=Ae,n=new Promise((...o)=>[e,t]=o);if(n.resolve=e,n.reject=t,M){let o=new Error().stack;n.catch(s=>s instanceof Error||s?.value instanceof Error?v.log("Deferred rejection",s,"allocated at ",o):void 0)}return n}function X(e){return e&&typeof e=="object"||typeof e=="function"}function F(e){return X(e)&&"then"in e&&typeof e.then=="function"}var Ie={};Pe(Ie,{Ignore:()=>D,Iterability:()=>_,asyncExtras:()=>z,asyncIterator:()=>me,augmentGlobalAsyncGenerators:()=>Xe,combine:()=>Oe,debounceQueueIteratableIterator:()=>Se,defineIterableProperty:()=>ge,filterMap:()=>G,generatorHelpers:()=>Ve,isAsyncIter:()=>W,isAsyncIterable:()=>ee,isAsyncIterator:()=>Z,iterableHelpers:()=>$,merge:()=>te,queueIteratableIterator:()=>he});var _=Symbol("Iterability");function Z(e){return X(e)&&"next"in e&&typeof e?.next=="function"}function ee(e){return X(e)&&Symbol.asyncIterator in e&&typeof e[Symbol.asyncIterator]=="function"}function W(e){return ee(e)||Z(e)}function me(e){if(ee(e))return e[Symbol.asyncIterator]();if(Z(e))return e;throw new Error("Not as async provider")}var z={filterMap(e,t=D){return G(this,e,t)},map:qe,filter:Be,unique:Ye,waitFor:Ze,multi:Je,initially:_e,consume:Me,merge(...e){return te(this,...e)},combine(e){return Oe(Object.assign({_this:this},e))}},be=[...Object.getOwnPropertySymbols(z),...Object.keys(z)];function ie(e,t){let n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(let o of n)Object.defineProperty(e,o,{...Object.getOwnPropertyDescriptor(t,o),enumerable:!1});return e}var k=Symbol("_pending"),U=Symbol("_items");function we(e=()=>{}){let t={[k]:[],[U]:[],[Symbol.asyncIterator](){return t},next(){if(t[U]?.length)return Promise.resolve(t[U].shift());if(!t[k])return Promise.resolve({done:!0,value:void 0});let n=pe();return n.catch(o=>{}),t[k].unshift(n),n},return(n){let o={done:!0,value:void 0};if(t[k]){try{e()}catch{}for(;t[k].length;)t[k].pop().resolve(o);t[U]=t[k]=null}return Promise.resolve(o)},throw(...n){let o={done:!0,value:n[0]};if(t[k]){try{e()}catch{}for(;t[k].length;)t[k].pop().reject(o);t[U]=t[k]=null}return Promise.reject(o)},get length(){return t[U]?t[U].length:-1},push(n){return t[k]?(t[k].length?t[k].pop().resolve({done:!1,value:n}):t[U]?t[U].push({done:!1,value:n}):v.log("Discarding queue push as there are no consumers"),!0):!1}};return $(t)}var se=Symbol("inflight");function Ge(e=()=>{}){let t=we(e);return t[se]=new Set,t.push=function(n){if(!t[k])return!1;if(t[se].has(n))return!0;if(t[k].length){t[se].add(n);let o=t[k].pop();o.finally(()=>t[se].delete(n)),o.resolve({done:!1,value:n})}else t[U]?t[U].find(o=>o===n)||t[U].push({done:!1,value:n}):v.log("Discarding queue push as there are no consumers");return!0},t}var he=we,Se=Ge,Y=Symbol("_proxiedAsyncIterator");function ge(e,t,n){let o=()=>{o=()=>j;let p=Se(),C=p.multi(),j=C[Symbol.asyncIterator]();return i[Symbol.asyncIterator]=C[Symbol.asyncIterator],m=p.push,be.forEach(N=>i[N]=j[N]),Y in I||ie(I,i),j};function s(p){return{[p]:function(...C){return o(),I[p].apply(this,C)}}[p]}let i={[Symbol.asyncIterator]:o};be.forEach(p=>i[p]=s(p)),typeof n=="object"&&n&&_ in n&&n[_]==="shallow"&&(i[_]=n[_]);let m=p=>(o(),m(p)),I=d(n,i),l;return Object.defineProperty(e,t,{get(){return I},set(p){if(p!==I)if(ee(p)){if(l===p)return;l=p;let C=M?new Error:void 0;M&&v.info(new Error(`Iterable "${t.toString()}" has been assigned to consume another iterator. Did you mean to declare it?`)),Me.call(p,j=>{if(p!==l)throw new Error(`Piped iterable "${t.toString()}" has been replaced by another iterator`,{cause:C});m(j?.valueOf())}).catch(j=>v.info(j)).finally(()=>p===l&&(l=void 0));return}else l&&M&&v.log(`Iterable "${t.toString()}" is already piped from another iterator, and might be overrwitten later`),I=d(p,i);m(p?.valueOf())},enumerable:!0}),e;function d(p,C){if(p==null)return ie(Object.create(null,{valueOf:{value(){return p},writable:!0},toJSON:{value(){return p},writable:!0}}),C);switch(typeof p){case"bigint":case"boolean":case"number":case"string":return ie(Object(p),Object.assign(C,{toJSON(){return p.valueOf()}}));case"object":return q(p,C)}throw new TypeError('Iterable properties cannot be of type "'+typeof p+'"')}function f(p){return X(p)&&Y in p}function x(p,C){let j=C.split(".").slice(1);for(let N=0;N<j.length&&(p=p?.[j[N]])!==void 0;N++);return p}function q(p,C){let j,N;return new Proxy(p,ae());function ae(a=""){return{has(c,h){return h===Y||h===Symbol.toPrimitive||h in c||h in C},set(c,h,r,b){if(Object.hasOwn(C,h))throw new Error(`Cannot set ${t.toString()}${a}.${h.toString()} as it is part of asyncIterator`);return Reflect.get(c,h,b)!==r&&m({[Y]:{a:p,path:a}}),Reflect.set(c,h,r,b)},deleteProperty(c,h){return Reflect.deleteProperty(c,h)?(m({[Y]:{a:p,path:a}}),!0):!1},get(c,h,r){if(Object.hasOwn(C,h))return a.length?(j??(j=G(C,u=>f(u)?u[Y]:{a:u,path:""})),G(j,(u,P)=>{let Q=x(u.a,a);return P!==Q||u.path.startsWith(a)?Q:D},D,x(p,a))[h]):(N??(N=G(C,b=>f(b)?b[Y].a:b)),N[h]);if(h==="valueOf")return()=>x(p,a);if(h===Symbol.toPrimitive)return function(b){return Reflect.has(c,h)?Reflect.get(c,h,c).call(c,b):b==="string"?c.toString():b==="number"?Number(c):c.valueOf()};if(typeof h=="string"&&(!(h in c)||Object.hasOwn(c,h))&&!(_ in c&&c[_]==="shallow")){let b=Reflect.get(c,h,r);return typeof b=="function"||W(b)?b:new Proxy(Object(b),ae(a+"."+h))}return Reflect.get(c,h,r)}}}}}var te=(...e)=>{let t=new Array(e.length),n=new Array(e.length),o=()=>{o=()=>{};for(let l=0;l<e.length;l++){let d=e[l];n[l]=(t[l]=Symbol.asyncIterator in d?d[Symbol.asyncIterator]():d).next().then(f=>({idx:l,result:f}))}},s=[],i=new Promise(()=>{}),m=n.length,I={[Symbol.asyncIterator](){return I},next(){return o(),m?Promise.race(n).then(({idx:l,result:d})=>d.done?(m--,n[l]=i,s[l]=d.value,I.next()):(n[l]=t[l]?t[l].next().then(f=>({idx:l,result:f})).catch(f=>({idx:l,result:{done:!0,value:f}})):Promise.resolve({idx:l,result:{done:!0,value:void 0}}),d)).catch(l=>I.throw?.(l)??Promise.reject({done:!0,value:new Error("Iterator merge exception")})):Promise.resolve({done:!0,value:s})},async return(l){for(let d=0;d<t.length;d++)n[d]!==i&&(n[d]=i,s[d]=await t[d]?.return?.({done:!0,value:l}).then(f=>f.value,f=>f));return{done:!0,value:s}},async throw(l){for(let d=0;d<t.length;d++)n[d]!==i&&(n[d]=i,s[d]=await t[d]?.throw?.(l).then(f=>f.value,f=>f));return{done:!0,value:s}}};return $(I)},Oe=(e,t={})=>{let n={},o,s=[],i=0,m=new Promise(()=>{}),I={[Symbol.asyncIterator](){return I},next(){return o===void 0&&(o=Object.entries(e).map(([l,d],f)=>(i+=1,s[f]=d[Symbol.asyncIterator](),s[f].next().then(x=>({si:s,idx:f,k:l,ir:x}))))),function l(){return Promise.race(o).then(({idx:d,k:f,ir:x})=>x.done?(o[d]=m,i-=1,i?l():{done:!0,value:void 0}):(n[f]=x.value,o[d]=s[d].next().then(q=>({idx:d,k:f,ir:q})),t.ignorePartial&&Object.keys(n).length<Object.keys(e).length?l():{done:!1,value:n}))}()},return(l){return o.forEach((d,f)=>{d!==m&&s[f].return?.(l)}),Promise.resolve({done:!0,value:l})},throw(l){return o.forEach((d,f)=>{d!==m&&s[f].throw?.(l)}),Promise.reject({done:!0,value:l})}};return $(I)};function Qe(e){return ee(e)&&be.every(t=>t in e&&e[t]===z[t])}function $(e){return Qe(e)||ie(e,z),e}function Ve(e){return function(...t){let n=e(...t);return $(n)}}async function Me(e){let t;for await(let n of this)t=e?.(n);await t}var D=Symbol("Ignore");function Ke(e,t,n){if(F(e))return e.then(t,n);try{return t(e)}catch(o){return n(o)}}function G(e,t,n=D,o=D){let s,i={[Symbol.asyncIterator](){return i},next(...m){if(n!==D){let I=Promise.resolve({done:!1,value:n});return n=D,I}return new Promise(function I(l,d){s||(s=e[Symbol.asyncIterator]()),s.next(...m).then(f=>f.done?l(f):Ke(t(f.value,o),x=>x===D?I(l,d):l({done:!1,value:o=x}),x=>{s.throw?s.throw(x):s.return?.(x),d({done:!0,value:x})}),f=>d({done:!0,value:f})).catch(f=>{s.throw?s.throw(f):s.return?.(f),d({done:!0,value:f})})})},throw(m){return Promise.resolve(s?.throw?s.throw(m):s?.return?.(m)).then(I=>({done:!0,value:I?.value}))},return(m){return Promise.resolve(s?.return?.(m)).then(I=>({done:!0,value:I?.value}))}};return $(i)}function qe(e){return G(this,e)}function Be(e){return G(this,async t=>await e(t)?t:D)}function Ye(e){return e?G(this,async(t,n)=>n===D||await e(t,n)?t:D):G(this,(t,n)=>t===n?D:t)}function _e(e){return G(this,t=>t,e)}function Ze(e){return G(this,t=>new Promise(n=>(e(()=>n(t)),t)))}function Je(){let e=this,t=0,n,o;function s(m){m&&n.resolve(m),m?.done||(n=pe(),o.next().then(s).catch(I=>n.reject({done:!0,value:I})))}let i={[Symbol.asyncIterator](){return t+=1,i},next(){return o||(o=e[Symbol.asyncIterator](),s()),n},throw(m){if(t<1)throw new Error("AsyncIterator protocol error");return t-=1,t?Promise.resolve({done:!0,value:m}):Promise.resolve(o?.throw?o.throw(m):o?.return?.(m)).then(I=>({done:!0,value:I?.value}))},return(m){if(t<1)throw new Error("AsyncIterator protocol error");return t-=1,t?Promise.resolve({done:!0,value:m}):Promise.resolve(o?.return?.(m)).then(I=>({done:!0,value:I?.value}))}};return $(i)}function Xe(){let e=async function*(){}();for(;e;){if(Object.getOwnPropertyDescriptor(e,Symbol.asyncIterator)){$(e);break}e=Object.getPrototypeOf(e)}e||v.warn("Failed to augment the prototype of `(async function*())()`")}var ne=new Map;function ze(e){let t=ne.get(e.type);if(t)for(let n of t)try{let{push:o,terminate:s,container:i,selector:m}=n;if(i.isConnected){if(e.target instanceof Node)if(m){let I=i.querySelectorAll(m);for(let l of I)(e.target===l||l.contains(e.target))&&i.contains(l)&&o(e)}else(e.target===i||i.contains(e.target))&&o(e)}else{let I="Container `#"+i.id+">"+(m||"")+"` removed from DOM. Removing subscription";t.delete(n),s(new Error(I))}}catch(o){v.warn("docEventHandler",o)}}function Te(e){return!!(e&&(e.startsWith("#")||e.startsWith(".")||e.startsWith("[")&&e.endsWith("]")))}function xe(e){let t=e.split(":");if(t.length===1)return Te(t[0])?[t[0],"change"]:[null,t[0]];if(t.length===2&&Te(t[1])&&!Te(t[0]))return[t[1],t[0]]}function et(e){throw new Error(e)}function Ee(e,t){let[n,o]=xe(t)??et("Invalid WhenSelector: "+t);ne.has(o)||(document.addEventListener(o,ze,{passive:!0,capture:!0}),ne.set(o,new Set));let s=he(()=>ne.get(o)?.delete(i)),i={push:s.push,terminate(m){s.return?.(m)},container:e,selector:n||null};return ke(e,n?[n]:void 0).then(m=>ne.get(o).add(i)),s.multi()}async function*Ce(){await new Promise(()=>{}),yield void 0}function ve(e){function t(n){return e.map(n)}return Object.assign($(t),{[Symbol.asyncIterator]:()=>e[Symbol.asyncIterator]()})}function tt(e){if(!e)throw new Error(`Falsy async source will never be ready

`+JSON.stringify(e));return typeof e=="string"&&e[0]!=="@"&&!!xe(e)}async function*nt(e){yield e}function le(e,...t){if(!t||t.length===0)return ve(Ee(e,"change"));let n=t.filter(i=>typeof i!="string"||i[0]!=="@").map(i=>typeof i=="string"?Ee(e,i):i instanceof Element?Ee(i,"change"):F(i)?nt(i):i);if(t.includes("@start")){let i={[Symbol.asyncIterator]:()=>i,next(){return i.next=()=>Promise.resolve({done:!0,value:void 0}),Promise.resolve({done:!1,value:{}})}};n.push(i)}if(t.includes("@ready")){let m=function(f){return typeof f=="string"&&!e.querySelector(f)};var s=m;let I=t.filter(tt).map(f=>xe(f)?.[0]).filter(m),l,d={[Symbol.asyncIterator](){return d},throw(f){return l?.throw?l.throw(f):Promise.resolve({done:!0,value:f})},return(f){return l?.return?l.return(f):Promise.resolve({done:!0,value:f})},next(){return l?l.next():ke(e,I).then(()=>(l=(n.length>1?te(...n):n.length===1?n[0]:Ce())[Symbol.asyncIterator](),l?{done:!1,value:{}}:{done:!0,value:void 0}))}};return ve($(d))}let o=n.length>1?te(...n):n.length===1?n[0]:Ce();return ve($(o))}function Ne(e){return e.isConnected?Promise.resolve():new Promise(t=>new MutationObserver((n,o)=>{n.some(s=>s.addedNodes?.length)&&e.isConnected&&(o.disconnect(),t())}).observe(document.body,{subtree:!0,childList:!0}))}function ke(e,t){return t?.length?Promise.all([rt(e,t),Ne(e)]):Ne(e)}function rt(e,t){if(t=t.filter(o=>!e.querySelector(o)),!t.length)return Promise.resolve();let n=new Promise(o=>new MutationObserver((s,i)=>{s.some(m=>m.addedNodes?.length)&&t.every(m=>e.querySelector(m))&&(i.disconnect(),o())}).observe(e,{subtree:!0,childList:!0}));if(M){let o=new Error().stack?.replace(/^Error/,"Missing selectors after 5 seconds:"),s=setTimeout(()=>{v.warn(o,t)},J);n.finally(()=>clearTimeout(s))}return n}var oe=Symbol("Unique ID"),K=M?e=>`"${"innerHTML"in e?e.innerHTML:e.textContent}"`:e=>{},ot=0,at=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],st=Object.getOwnPropertyDescriptors({get ids(){return He(this)},set ids(e){throw new Error("Cannot set ids on "+this.valueOf())},when:function(...e){return le(this,...e)}}),fe=document.createElement("STYLE");fe.id="--ai-ui-extended-tag-styles-";function ce(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e instanceof Node||e instanceof NodeList||e instanceof HTMLCollection||e===null||e===void 0||Array.isArray(e)||F(e)||W(e)||typeof e=="object"&&Symbol.iterator in e&&typeof e[Symbol.iterator]=="function"}var re=Symbol("callStack"),De=function(e,t,n){let[o,s,i]=typeof e=="string"||e===null?[e,t,n]:Array.isArray(e)?[null,e,t]:[null,at,e],m=it(document,"removedNodes"),I=i?.commonProperties,l=Object.create(null,st);Object.defineProperty(l,"attributes",{...Object.getOwnPropertyDescriptor(Element.prototype,"attributes"),set(a){if(W(a)){let c=Z(a)?a:a[Symbol.asyncIterator](),h=()=>c.next().then(({done:r,value:b})=>{p(this,b),r||h()},r=>v.warn(r));h()}else p(this,a)}}),I&&x(l,I);function d(...a){let c=[];return function h(r){if(!(r==null||r===D)){if(F(r)){let b=ue();c.push(b),r.then(u=>b.replaceWith(...d(u)),u=>{v.warn(u,K(b)),b.replaceWith(de({error:u}))});return}if(r instanceof Node){c.push(r);return}if(r&&typeof r=="object"&&Symbol.iterator in r&&!(Symbol.asyncIterator in r)&&r[Symbol.iterator]){for(let b of r)h(b);return}if(W(r)){let b=M?`
`+new Error().stack?.replace(/^Error: /,"Insertion :"):"",u=Z(r)?r:r[Symbol.asyncIterator](),P=r.valueOf(),Q=P===void 0||P===r?[ue()]:d(P),y=Q.length?Q:[ue()];c.push(...y);let g=!0,T=Date.now()+J,A=M&&new Error("Created by").stack,L=w=>{let O=y.filter(R=>!!R?.parentNode);O.length?(y=[de({error:w})],O[0].replaceWith(...y),O.slice(1).forEach(R=>R?.parentNode.removeChild(R))):v.warn("Can't report error",w,A,y.map(K)),y=[],u.return?.(L)},V=w=>{if(!w.done)try{let O=y.filter(E=>E?.parentNode&&E.isConnected),R=g?y:O;if(O.length&&(g=!1),!R.length||y.every(E=>m(E))){y=[];let E="Element(s) have been removed from the document: "+b;u.return?.(new Error(E));return}M&&g&&T&&T<Date.now()&&(T=Number.MAX_SAFE_INTEGER,v.warn("Async element not mounted after 5 seconds. If it is never mounted, it will leak.",A,y.map(K))),y=d(q(w.value)),y.length||y.push(ue()),R[0].replaceWith(...y),R.slice(1).forEach(E=>!y.includes(E)&&E.parentNode?.removeChild(E)),u.next().then(V).catch(L)}catch(O){y=[],u.return?.(O)}};u.next().then(V).catch(L);return}c.push(document.createTextNode(r.toString()))}}(a),c}o||Object.assign(De,{nodes:d,UniqueID:oe});let f=Object.getPrototypeOf({});function x(a,c,h){if(!(c==null||typeof c!="object"||c===a))for(let[r,b]of Object.entries(Object.getOwnPropertyDescriptors(c)))try{if("value"in b){let u=b.value;u&&W(u)?Object.defineProperty(a,r,b):u&&typeof u=="object"&&!F(u)?r in a?u instanceof Node?(v.info("Having DOM Nodes as properties of other DOM Nodes is a bad idea as it makes the DOM tree into a cyclic graph. You should reference nodes by ID or as a child",r,K(u)),a[r]=u):a[r]!==u&&(Array.isArray(a[r])&&a[r].length!==u.length?u.constructor===Object||u.constructor===Array?x(a[r]=new u.constructor,u):a[r]=u:x(a[r],u)):(h&&(Object.getPrototypeOf(u)===f||!Object.getPrototypeOf(u)?x(b.value={},u):Array.isArray(u)?x(b.value=[],u):v.warn(`Declared propety '${r}' is not a plain object and must be assigned by reference, possibly polluting other instances of this tag`,a,u)),Object.defineProperty(a,r,b)):c[r]!==void 0&&(a[r]=c[r])}else Object.defineProperty(a,r,b)}catch(u){throw v.warn("deepAssign",r,c[r],u),u}}function q(a){let c=a?.valueOf();return Array.isArray(c)?Array.prototype.map.call(c,q):c}function p(a,c){re in c||function h(r,b){if(b==null||typeof b!="object")return;let u=Object.entries(Object.getOwnPropertyDescriptors(b));Array.isArray(b)||u.sort((y,g)=>{let T=Object.getOwnPropertyDescriptor(r,y[0]);if(T){if("value"in T)return-1;if("set"in T)return 1;if("get"in T)return .5}return 0});for(let[y,g]of u)try{if("value"in g){let T=g.value;W(T)?P(T,y):F(T)?T.then(A=>{A&&typeof A=="object"?W(A)?P(A,y):Q(A,y):b[y]!==void 0&&(r[y]=A)},A=>v.log("Failed to set attribute",A)):W(T)||(T&&typeof T=="object"&&!F(T)?Q(T,y):b[y]!==void 0&&(r[y]=b[y]))}else Object.defineProperty(r,y,g)}catch(T){throw v.warn("assignProps",y,b[y],T),T}function P(y,g){let T=me(y),A=!0,L=Date.now()+J,V=M&&new Error("Created by").stack,w=E=>{if(!E.done){let S=q(E.value);if(typeof S=="object"&&S!==null){let B=Object.getOwnPropertyDescriptor(r,g);g==="style"||!B?.set?h(r[g],S):r[g]=S}else S!==void 0&&(r[g]=S);let H=a.isConnected;if(m(a)||!A&&!H){v.info(`Element does not exist in document when setting async attribute '${g}' to:
${K(a)}`),T.return?.();return}H&&(A=!1),A&&L&&L<Date.now()&&(L=Number.MAX_SAFE_INTEGER,v.warn(`Element with async attribute '${g}' not mounted after 5 seconds. If it is never mounted, it will leak.
Element contains: ${K(a)}
${V}`)),T.next().then(w).catch(O)}},O=E=>{v.warn("Dynamic attribute error",E,g,r,V,K(a)),T.return?.(E),a.appendChild(de({error:E}))},R=y.valueOf();R!==void 0&&R!==y&&!W(R)?w({done:!1,value:R}):T.next().then(w).catch(O)}function Q(y,g){if(y instanceof Node)v.info("Having DOM Nodes as properties of other DOM Nodes is a bad idea as it makes the DOM tree into a cyclic graph. You should reference nodes by ID or via a collection such as .childNodes",g,K(y)),r[g]=y;else if(!(g in r)||r[g]===y||Array.isArray(r[g])&&r[g].length!==y.length)if(y.constructor===Object||y.constructor===Array){let T=new y.constructor;h(T,y),r[g]=T}else r[g]=y;else Object.getOwnPropertyDescriptor(r,g)?.set?r[g]=y:h(r[g],y)}}(a,c)}function C(a){for(let c=a.constructor;c;c=c.super)if(c===this)return!0;return!1}function j(a){let c=typeof a!="function"?g=>Object.assign({},a,g):a,h=Date.now().toString(36)+(ot++).toString(36)+Math.random().toString(36).slice(2),r=c({[oe]:h});r.styles&&(fe.appendChild(document.createTextNode(r.styles+`
`)),document.head.contains(fe)||document.head.appendChild(fe));let u=Object.assign((g,...T)=>{let A=ce(g),L=[],V={[re]:(A?L:g[re])??L},w=A?this(V,g,...T):this(V,...T);w.constructor=u;let O=c({[oe]:h});if(V[re].push(O),M){let E=function(S,H){for(let B=S;B;B=B.super)if(B.definition?.declare&&H in B.definition.declare)return!0;return!1};var R=E;if(O.declare){let S=Object.keys(O.declare).filter(H=>H in w||E(this,H));S.length&&v.log(`Declared keys '${S}' in ${u.name} already exist in base '${this.valueOf()}'`)}if(O.override){let S=Object.keys(O.override).filter(H=>!(H in w)&&!(I&&H in I)&&!E(this,H));S.length&&v.log(`Overridden keys '${S}' in ${u.name} do not exist in base '${this.valueOf()}'`)}}if(x(w,O.declare,!0),x(w,O.override),O.iterable&&Object.keys(O.iterable).forEach(E=>{E in w?v.log(`Ignoring attempt to re-define iterable property "${E}" as it could already have consumers`):ge(w,E,O.iterable[E])}),V[re]===L){A||p(w,g);for(let E of L){let S=E?.constructed?.call(w);ce(S)&&w.append(...d(S))}for(let E of L)if(E.iterable){for(let S of Object.keys(E.iterable))if(!(!A&&S in g&&(!F(g[S])||!W(g[S])))){let H=w[S];H?.valueOf()!==void 0&&(w[S]=H)}}}return w},{super:this,definition:Object.assign(r,{[oe]:h}),extended:j,valueOf:()=>{let g=[...Object.keys(r.declare||{}),...Object.keys(r.iterable||{})];return`${u.name}: {${g.join(", ")}}
 \u21AA ${this.valueOf()}`}});Object.defineProperty(u,Symbol.hasInstance,{value:C,writable:!0,configurable:!0});let P={};(function g(T){T?.super&&g(T.super);let A=T.definition;A&&(x(P,A?.override),x(P,A?.declare))})(this),x(P,r.override),x(P,r.declare),Object.defineProperties(u,Object.getOwnPropertyDescriptors(P));let Q=P&&"className"in P&&typeof P.className=="string"?P.className:h,y=M?new Error().stack?.split(`
`)[2]??"":"";if(Object.defineProperty(u,"name",{value:"<ai-"+Q.replace(/\s+/g,"-")+y+">"}),M){let g=Object.keys(r).filter(T=>!["styles","ids","constructed","declare","override","iterable"].includes(T));g.length&&v.log(`${u.name} defines extraneous keys '${g}', which are unknown`)}return u}let N={createElement(a,c,...h){return a===N.createElement?d(...h):typeof a=="function"?a(c,h):typeof a=="string"&&a in N?N[a](c,h):a instanceof Node?a:de({error:new Error("Illegal type in createElement:"+a)})}};function ae(a){if(N[a])return N[a];let c=(r,...b)=>{let u=document;if(ce(r)&&(b.unshift(r),r={}),!ce(r)){if(r.debugger){debugger;delete r.debugger}r.document&&(u=r.document,delete r.document);let P=o?u.createElementNS(o,a.toLowerCase()):u.createElement(a);return P.constructor=c,x(P,l),p(P,r),P.append(...d(...b)),P}},h=Object.assign(c,{super:()=>{throw new Error("Can't invoke native elemenet constructors directly. Use document.createElement().")},extended:j,valueOf(){return`TagCreator: <${o||""}${o?"::":""}${a}>`}});return Object.defineProperty(c,Symbol.hasInstance,{value:C,writable:!0,configurable:!0}),Object.defineProperty(c,"name",{value:"<"+a+">"}),N[a]=h}return s.forEach(ae),N};function ue(){return document.createComment(M&&new Error("promise").stack?.replace(/^Error: /,"")||"promise")}function de({error:e}){return document.createComment(e instanceof Error?e.toString():`Error:
`+JSON.stringify(e,null,2))}var Re=function(){Re=function(){},new MutationObserver(e=>{e.forEach(function(t){t.type==="childList"&&t.removedNodes.forEach(n=>n&&n instanceof Element&&[...n.getElementsByTagName("*"),n].filter(o=>!o.isConnected).forEach(o=>{"onRemovedFromDOM"in o&&typeof o.onRemovedFromDOM=="function"&&o.onRemovedFromDOM()}))})}).observe(document.body,{subtree:!0,childList:!0})};function it(e,t){let n=new WeakSet;function o(s){for(let i of s)t==="addedNodes"===i.isConnected&&(o(i.childNodes),n.add(i))}return new MutationObserver(s=>{s.forEach(function(i){i.type==="childList"&&i.removedNodes.length&&o(i[t])})}).observe(e,{subtree:!0,childList:!0}),function(s){return n.has(s)}}var je=new Set;function He(e,t){return e=e||document,t=t||Object.create(null),e.querySelectorAll&&e.querySelectorAll("[id]").forEach(function(n){n.id&&(t[n.id]?M&&(je.has(n.id)||(je.add(n.id),v.info("Shadowed multiple element IDs",n.id))):t[n.id]=n)}),t}return Fe(lt);})();
